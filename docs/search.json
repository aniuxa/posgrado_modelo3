[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "",
    "text": "Introducción al curso"
  },
  {
    "objectID": "index.html#objetivo-general",
    "href": "index.html#objetivo-general",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Objetivo general",
    "text": "Objetivo general\nQue el estudiantado sea capaz de realizar inferencia estadística y modelado de una variable dependiente utilizando R aplicado a las bases de datos mexicanas."
  },
  {
    "objectID": "index.html#temas",
    "href": "index.html#temas",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Temas",
    "text": "Temas\n1. Revisión de elementos estadísticos básicos desde “tidyverse”\n\nTablas de múltiples entradas\nRepaso de ggplot2\n\n2. Pruebas de hipótesis e intervalos de confianza\n\nDe una sola media\nDe dos medias\nMedias apareadas\nProporciones\nDiferencia de proporciones\nChi-cuadrado de independencia\nPrueba ANOVA de un solo factor\nPruebas no parámetricas\n\n3. Factores de expansión y diseño muestral complejo\n\nDe “survey” a “srvyr”\nTabulados\nIntervalos de confianza para medias y cuantiles\n\n4. Introducción al modelo de regresión lineal\n\nSimple\nMúltiple\nEvaluación de supuestos\n\n5. Introducción a los modelos lineales generalizados\n\nIntroducción a la regresión logística\nEvaluación de supuestos\nEfectos marginales\nInteracciones y efectos de más de primer orden"
  },
  {
    "objectID": "index.html#metodología",
    "href": "index.html#metodología",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Metodología",
    "text": "Metodología\nLa metodología del curso consistirá en lo siguiente:\n1. La exposición de la facilitadora. Durante la primera parte de la sesión, se expondrán los comandos necesarios para llevar a cabo cada tema. Se dará una introducción sobre la temática y se buscará dar ejemplos concretos para facilitar el aprendizaje. Se espera que el personal exponga sus dudas o comentarios a lo largo de la explicación.\n2. Realización de ejercicios prácticos. Al final de cada sesión, corresponderá a las personas asistentes del curso realizar individualmente o en parejas un ejercicio relacionado con lo visto en la primera parte de la clase.\n3. Consulta autónoma de material. Tanto la exposición como los ejercicios serán acompañado de material de consulta realizado ad hoc para el curso y el contenido, de tal manera que el estudiantado pueda volver a los códigos y las explicaciones posteriormente."
  },
  {
    "objectID": "index.html#proyecto-en-posit.cloud",
    "href": "index.html#proyecto-en-posit.cloud",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Proyecto en posit.cloud",
    "text": "Proyecto en posit.cloud\nhttps://posit.cloud/content/5191591\nCon este proyecto se trabajará a lo largo del curso"
  },
  {
    "objectID": "index.html#versiones-anteriores",
    "href": "index.html#versiones-anteriores",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Versiones anteriores",
    "text": "Versiones anteriores\nEsta es la tercera vez que se imparte el curso. Las versiones anteriores están\n\nhttps://aniuxa.github.io/posgrado_modelo/\nhttps://aniuxa.github.io/posgrado_modelo2/"
  },
  {
    "objectID": "index.html#facilitadora",
    "href": "index.html#facilitadora",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Facilitadora",
    "text": "Facilitadora\n\nAna Ruth Escoto Castillo\nDoctora en Estudios de Población. Centro de Estudios Demográficos y Urbanos, El Colegio de México.\nSemblanza\nProfesora de tiempo completo en la Facultad de Ciencias Políticas y Sociales. Investigadora nivel I en elSistema Nacional de Investigadores. Maestra en Población y Desarrollo por la Facultad Latinoamericana de Ciencias Sociales (FLACSO) – Sede México. Posee experiencia en recolección de información estadística, diseño y control de procesos de recolección y su procesamiento. Ha aplicado diversos métodos y herramientas multivariadas, homologación de información y comparabilidad de fuentes en sus investigaciones, así como usa de diversos softwares estadísticos, y ha impartido clases de estadítica aplicada a nivel de licenciatura y posgrado. Es co-coordinadora del Capítulo de CDMX de la iniciativa RLadies."
  },
  {
    "objectID": "index.html#bibliografía",
    "href": "index.html#bibliografía",
    "title": "Inferencia e introducción a los modelos estadísticos con R",
    "section": "Bibliografía",
    "text": "Bibliografía\n\nBásica\nEscoto Castillo, A. R. (2021). ¿Cómo empezar a estudiar el mercado de trabajo en México? Una introducción al análisis estadístico con R aplicado a la Encuesta Nacional de Ocupación y Empleo. Ciudad de México: Universidad Nacional Autónoma de México.\nWickham, H., & Grolemund, G. (2016). R for data science: Import, tidy, transform, visualize, and model data. O’Reilly Media, Inc.\n\nEspañol\nInglés\n\n\n\nFundamentos estadísticos\n\nHardy, M. A., & Bryman, A. (Eds.). (2009). Handbook of data analysis. SAGE.\nHazelrigg, L. (2009). Inference. En M. A. Hardy & A. Bryman (Eds.), Handbook of data analysis (pp. 65–111). SAGE.\nMendenhall, W., Beaver, R. J., & Beaver, B. M. (2014). Introducción a la probabilidad y estadística (J. A. Velázquez Arellano, Trad.).\nMoore, D. S. (2004). The basic practice of statistics (3rd ed). W.H. Freeman.\nWooldridge, J. (2010). Introducción a la Econometría. 4e. Cengage Learning Editores S.A. de C.V. http://public.eblib.com/choice/publicfullrecord.aspx?p=4641575"
  },
  {
    "objectID": "instala.html#introducción-a-r",
    "href": "instala.html#introducción-a-r",
    "title": "Instalación de R y Rstudio",
    "section": "Introducción a R",
    "text": "Introducción a R"
  },
  {
    "objectID": "instala.html#instalación-en-os",
    "href": "instala.html#instalación-en-os",
    "title": "Instalación de R y Rstudio",
    "section": "Instalación en OS",
    "text": "Instalación en OS"
  },
  {
    "objectID": "instala.html#instalación-en-pc",
    "href": "instala.html#instalación-en-pc",
    "title": "Instalación de R y Rstudio",
    "section": "Instalación en PC",
    "text": "Instalación en PC"
  },
  {
    "objectID": "instala.html#ojo",
    "href": "instala.html#ojo",
    "title": "Instalación de R y Rstudio",
    "section": "Ojo",
    "text": "Ojo\nDesde octubre de 2022, RStudio se volvió “Posit”"
  },
  {
    "objectID": "P1.html#paquetes",
    "href": "P1.html#paquetes",
    "title": "1  Introducción: {dplyr}",
    "section": "1.1 Paquetes",
    "text": "1.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\")#instala pacman si se requiere\n\nLoading required package: pacman\n\npacman::p_load(tidyverse,\n               readxl,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               infer, \n               ggpubr,\n               magrittr,\n               gt)"
  },
  {
    "objectID": "P1.html#cargando-los-datos",
    "href": "P1.html#cargando-los-datos",
    "title": "1  Introducción: {dplyr}",
    "section": "1.2 Cargando los datos",
    "text": "1.2 Cargando los datos\nDesde STATA\n\ntlaxt322<- haven::read_dta(\"./datos/tlaxt322.dta\")\n\nDesde Excel:\n\nICI_2021 <- readxl::read_excel(\"./datos/ICI_2021.xlsx\",\n                               sheet = \"para_importar\")\n\nNew names:\n• `` -> `...2`"
  },
  {
    "objectID": "P1.html#un-poquito-de-dplyr-y-limpieza",
    "href": "P1.html#un-poquito-de-dplyr-y-limpieza",
    "title": "1  Introducción: {dplyr}",
    "section": "1.3 Un poquito de {dplyr} y limpieza",
    "text": "1.3 Un poquito de {dplyr} y limpieza\n\n1.3.1 Primero, los pipes\nR utiliza dos pipes el nativo |> y el pipe que está en {dplyr} %>%. Algunas de las diferencias las puedes checar acá https://eliocamp.github.io/codigo-r/2021/05/r-pipa-nativa/\nEn estas prácticas utilizaremos el segundo, pero son muy parecidos y para que esta instructora recicle algunos de sus códigos viejos. Pero funcionan igual:\n\ntlaxt322|> #pipe nativo, no necesita instalación\n  head()\n\n# A tibble: 6 × 114\n  r_def           loc   mun   est est_d…¹ est_d…²  ageb t_loc…³ t_loc…⁴ cd_a    \n  <dbl+lbl>     <dbl> <dbl> <dbl>   <dbl>   <dbl> <dbl> <dbl+l> <dbl+l> <dbl+lb>\n1 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n2 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n3 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n4 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n5 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n6 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n# … with 104 more variables: ent <dbl+lbl>, con <dbl>, upm <dbl>,\n#   d_sem <dbl+lbl>, n_pro_viv <dbl>, v_sel <dbl+lbl>, n_hog <dbl+lbl>,\n#   h_mud <dbl+lbl>, n_ent <dbl+lbl>, per <dbl+lbl>, n_ren <dbl+lbl>,\n#   c_res <dbl+lbl>, par_c <dbl>, sex <dbl+lbl>, eda <dbl>, nac_dia <dbl+lbl>,\n#   nac_mes <dbl+lbl>, nac_anio <dbl>, l_nac_c <dbl+lbl>, cs_p12 <dbl+lbl>,\n#   cs_p13_1 <dbl+lbl>, cs_p13_2 <dbl+lbl>, cs_p14_c <chr>, cs_p15 <dbl+lbl>,\n#   cs_p16 <dbl+lbl>, cs_p17 <dbl+lbl>, n_hij <dbl+lbl>, e_con <dbl+lbl>, …\n\n\n\ntlaxt322 %>%  #pipe de dplyr, necesita instalación de dplyr en tidyverse\n  head()\n\n# A tibble: 6 × 114\n  r_def           loc   mun   est est_d…¹ est_d…²  ageb t_loc…³ t_loc…⁴ cd_a    \n  <dbl+lbl>     <dbl> <dbl> <dbl>   <dbl>   <dbl> <dbl> <dbl+l> <dbl+l> <dbl+lb>\n1 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n2 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n3 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n4 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n5 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n6 0 [Entrevist…    NA    31    20     413      NA     0 2 [Loc… NA      39 [Tla…\n# … with 104 more variables: ent <dbl+lbl>, con <dbl>, upm <dbl>,\n#   d_sem <dbl+lbl>, n_pro_viv <dbl>, v_sel <dbl+lbl>, n_hog <dbl+lbl>,\n#   h_mud <dbl+lbl>, n_ent <dbl+lbl>, per <dbl+lbl>, n_ren <dbl+lbl>,\n#   c_res <dbl+lbl>, par_c <dbl>, sex <dbl+lbl>, eda <dbl>, nac_dia <dbl+lbl>,\n#   nac_mes <dbl+lbl>, nac_anio <dbl>, l_nac_c <dbl+lbl>, cs_p12 <dbl+lbl>,\n#   cs_p13_1 <dbl+lbl>, cs_p13_2 <dbl+lbl>, cs_p14_c <chr>, cs_p15 <dbl+lbl>,\n#   cs_p16 <dbl+lbl>, cs_p17 <dbl+lbl>, n_hij <dbl+lbl>, e_con <dbl+lbl>, …\n\n\n\n\n1.3.2 Limpieza de nombres con {janitor}\nEste paso también nos permitirá enseñar otro pipe que está en el paquete {magrittr}.\nLos nombres de una base de datos son los nombres de las columnas.\n\nnames(tlaxt322)\n\n  [1] \"r_def\"      \"loc\"        \"mun\"        \"est\"        \"est_d_tri\" \n  [6] \"est_d_men\"  \"ageb\"       \"t_loc_tri\"  \"t_loc_men\"  \"cd_a\"      \n [11] \"ent\"        \"con\"        \"upm\"        \"d_sem\"      \"n_pro_viv\" \n [16] \"v_sel\"      \"n_hog\"      \"h_mud\"      \"n_ent\"      \"per\"       \n [21] \"n_ren\"      \"c_res\"      \"par_c\"      \"sex\"        \"eda\"       \n [26] \"nac_dia\"    \"nac_mes\"    \"nac_anio\"   \"l_nac_c\"    \"cs_p12\"    \n [31] \"cs_p13_1\"   \"cs_p13_2\"   \"cs_p14_c\"   \"cs_p15\"     \"cs_p16\"    \n [36] \"cs_p17\"     \"n_hij\"      \"e_con\"      \"cs_p20a_1\"  \"cs_p20a_c\" \n [41] \"cs_p20b_1\"  \"cs_p20b_c\"  \"cs_p20c_1\"  \"cs_ad_mot\"  \"cs_p21_des\"\n [46] \"cs_ad_des\"  \"cs_nr_mot\"  \"cs_p23_des\" \"cs_nr_ori\"  \"ur\"        \n [51] \"zona\"       \"salario\"    \"fac_tri\"    \"fac_men\"    \"clase1\"    \n [56] \"clase2\"     \"clase3\"     \"pos_ocu\"    \"seg_soc\"    \"rama\"      \n [61] \"c_ocu11c\"   \"ing7c\"      \"dur9c\"      \"emple7c\"    \"medica5c\"  \n [66] \"buscar5c\"   \"rama_est1\"  \"rama_est2\"  \"dur_est\"    \"ambito1\"   \n [71] \"ambito2\"    \"tue1\"       \"tue2\"       \"tue3\"       \"busqueda\"  \n [76] \"d_ant_lab\"  \"d_cexp_est\" \"dur_des\"    \"sub_o\"      \"s_clasifi\" \n [81] \"remune2c\"   \"pre_asa\"    \"tip_con\"    \"dispo\"      \"nodispo\"   \n [86] \"c_inac5c\"   \"pnea_est\"   \"niv_ins\"    \"eda5c\"      \"eda7c\"     \n [91] \"eda12c\"     \"eda19c\"     \"hij5c\"      \"domestico\"  \"anios_esc\" \n [96] \"hrsocup\"    \"ingocup\"    \"ing_x_hrs\"  \"tpg_p8a\"    \"tcco\"      \n[101] \"cp_anoc\"    \"imssissste\" \"ma48me1sm\"  \"p14apoyos\"  \"scian\"     \n[106] \"t_tra\"      \"emp_ppal\"   \"tue_ppal\"   \"trans_ppal\" \"mh_fil2\"   \n[111] \"mh_col\"     \"sec_ins\"    \"tipo\"       \"mes_cal\"   \n\nnames(ICI_2021)\n\n [1] \"País\"                                                                  \n [2] \"...2\"                                                                  \n [3] \"Protección de derechos humanos\"                                        \n [4] \"Homicidios dolosos\"                                                    \n [5] \"Confianza en la policía\"                                               \n [6] \"Independencia del poder judicial\"                                      \n [7] \"Protección de derechos de propiedad\"                                   \n [8] \"Tiempo para resolver quiebras\"                                         \n [9] \"Cumplimiento de contratos\"                                             \n[10] \"Índice de Estado de Derecho\"                                           \n[11] \"Índice de Paz Global\"                                                  \n[12] \"Contaminación del aire\"                                                \n[13] \"Emisiones de CO2\"                                                      \n[14] \"Recursos hídricos renovables\"                                          \n[15] \"Áreas naturales protegidas\"                                            \n[16] \"Superficie forestal perdida\"                                           \n[17] \"Uso de pesticidas\"                                                     \n[18] \"Fuentes de energía no contaminantes\"                                   \n[19] \"Índice de vulnerabilidad a efectos del cambio climático\"               \n[20] \"Índice de Gini\"                                                        \n[21] \"Índice Global de Brecha de Género\"                                     \n[22] \"Mujeres en la PEA\"                                                     \n[23] \"Dependientes de la PEA\"                                                \n[24] \"Acceso a agua potable\"                                                 \n[25] \"Acceso a alcantarillado\"                                               \n[26] \"Analfabetismo\"                                                         \n[27] \"Escolaridad promedio\"                                                  \n[28] \"Calidad educativa\"                                                     \n[29] \"Esperanza de vida\"                                                     \n[30] \"Mortalidad infantil\"                                                   \n[31] \"Cobertura de vacunación\"                                               \n[32] \"Médicos y médicas\"                                                     \n[33] \"Gasto en salud per cápita\"                                             \n[34] \"Gasto en salud por cuenta propia\"                                      \n[35] \"Estabilidad política y ausencia de violencia\"                          \n[36] \"Interferencia militar en el Estado de derecho o en el proceso político\"\n[37] \"Libertades civiles\"                                                    \n[38] \"Índice de Percepción de Corrupción\"                                    \n[39] \"Disponibilidad de información pública\"                                 \n[40] \"Participación electoral\"                                               \n[41] \"Equidad en los congresos\"                                              \n[42] \"Índice de efectividad del gobierno\"                                    \n[43] \"Miembro de la Alianza para el Gobierno Abierto\"                        \n[44] \"Índice de desarrollo de Gobierno Electrónico\"                          \n[45] \"Facilidad para abrir una empresa\"                                      \n[46] \"Tiempo para preparar y pagar impuestos\"                                \n[47] \"Ingresos fiscales\"                                                     \n[48] \"Finanzas sanas\"                                                        \n[49] \"Carga impositiva\"                                                      \n[50] \"Edad efectiva de retiro\"                                               \n[51] \"Flexibilidad de las leyes laborales\"                                   \n[52] \"Productividad media del trabajo\"                                       \n[53] \"Valor agregado de la industria\"                                        \n[54] \"Índice de transparencia y regulación de la propiedad privada\"          \n[55] \"Crecimiento del PIB\"                                                   \n[56] \"Crecimiento promedio del PIB\"                                          \n[57] \"Inflación\"                                                             \n[58] \"Inflación promedio\"                                                    \n[59] \"Desempleo\"                                                             \n[60] \"Deuda externa\"                                                         \n[61] \"Calificación de deuda\"                                                 \n[62] \"Reservas\"                                                              \n[63] \"Libertad económica\"                                                    \n[64] \"Índice Riesgos de seguridad energética\"                                \n[65] \"Líneas móviles\"                                                        \n[66] \"Usuarios de internet\"                                                  \n[67] \"Servidores de internet seguros\"                                        \n[68] \"Flujo de pasajeros aéreos\"                                             \n[69] \"Índice de desempeño logístico (transporte)\"                            \n[70] \"Tráfico portuario de contenedores\"                                     \n[71] \"Penetración del sistema financiero privado\"                            \n[72] \"Capitalización del mercado de valores\"                                 \n[73] \"Socios comerciales efectivos\"                                          \n[74] \"Apertura comercial\"                                                    \n[75] \"Diversificación de las exportaciones\"                                  \n[76] \"Diversificación de las importaciones\"                                  \n[77] \"Libertad comercial\"                                                    \n[78] \"Inversión extranjera directa (neta)\"                                   \n[79] \"Inversión Extranjera Directa neta promedio\"                            \n[80] \"Ingresos por turismo\"                                                  \n[81] \"Gasto en investigación y desarrollo\"                                   \n[82] \"Coeficiente de invención\"                                              \n[83] \"Artículos científicos y técnicos\"                                      \n[84] \"Exportaciones de alta tecnología\"                                      \n[85] \"Índice de Complejidad Económica\"                                       \n[86] \"Empresas ISO 9001\"                                                     \n[87] \"PIB en servicios\"                                                      \n[88] \"0\"                                                                     \n[89] \"Inversión (FBCF)\"                                                      \n[90] \"Talento\"                                                               \n\n\nComo vemos en las bases hay mayúsculas, caracteres especiales y demás. Esto lo podemos cambiar\n\nICI_2021<-ICI_2021 %>% \n  janitor::clean_names()\n\nnames(ICI_2021)\n\n [1] \"pais\"                                                                  \n [2] \"x2\"                                                                    \n [3] \"proteccion_de_derechos_humanos\"                                        \n [4] \"homicidios_dolosos\"                                                    \n [5] \"confianza_en_la_policia\"                                               \n [6] \"independencia_del_poder_judicial\"                                      \n [7] \"proteccion_de_derechos_de_propiedad\"                                   \n [8] \"tiempo_para_resolver_quiebras\"                                         \n [9] \"cumplimiento_de_contratos\"                                             \n[10] \"indice_de_estado_de_derecho\"                                           \n[11] \"indice_de_paz_global\"                                                  \n[12] \"contaminacion_del_aire\"                                                \n[13] \"emisiones_de_co2\"                                                      \n[14] \"recursos_hidricos_renovables\"                                          \n[15] \"areas_naturales_protegidas\"                                            \n[16] \"superficie_forestal_perdida\"                                           \n[17] \"uso_de_pesticidas\"                                                     \n[18] \"fuentes_de_energia_no_contaminantes\"                                   \n[19] \"indice_de_vulnerabilidad_a_efectos_del_cambio_climatico\"               \n[20] \"indice_de_gini\"                                                        \n[21] \"indice_global_de_brecha_de_genero\"                                     \n[22] \"mujeres_en_la_pea\"                                                     \n[23] \"dependientes_de_la_pea\"                                                \n[24] \"acceso_a_agua_potable\"                                                 \n[25] \"acceso_a_alcantarillado\"                                               \n[26] \"analfabetismo\"                                                         \n[27] \"escolaridad_promedio\"                                                  \n[28] \"calidad_educativa\"                                                     \n[29] \"esperanza_de_vida\"                                                     \n[30] \"mortalidad_infantil\"                                                   \n[31] \"cobertura_de_vacunacion\"                                               \n[32] \"medicos_y_medicas\"                                                     \n[33] \"gasto_en_salud_per_capita\"                                             \n[34] \"gasto_en_salud_por_cuenta_propia\"                                      \n[35] \"estabilidad_politica_y_ausencia_de_violencia\"                          \n[36] \"interferencia_militar_en_el_estado_de_derecho_o_en_el_proceso_politico\"\n[37] \"libertades_civiles\"                                                    \n[38] \"indice_de_percepcion_de_corrupcion\"                                    \n[39] \"disponibilidad_de_informacion_publica\"                                 \n[40] \"participacion_electoral\"                                               \n[41] \"equidad_en_los_congresos\"                                              \n[42] \"indice_de_efectividad_del_gobierno\"                                    \n[43] \"miembro_de_la_alianza_para_el_gobierno_abierto\"                        \n[44] \"indice_de_desarrollo_de_gobierno_electronico\"                          \n[45] \"facilidad_para_abrir_una_empresa\"                                      \n[46] \"tiempo_para_preparar_y_pagar_impuestos\"                                \n[47] \"ingresos_fiscales\"                                                     \n[48] \"finanzas_sanas\"                                                        \n[49] \"carga_impositiva\"                                                      \n[50] \"edad_efectiva_de_retiro\"                                               \n[51] \"flexibilidad_de_las_leyes_laborales\"                                   \n[52] \"productividad_media_del_trabajo\"                                       \n[53] \"valor_agregado_de_la_industria\"                                        \n[54] \"indice_de_transparencia_y_regulacion_de_la_propiedad_privada\"          \n[55] \"crecimiento_del_pib\"                                                   \n[56] \"crecimiento_promedio_del_pib\"                                          \n[57] \"inflacion\"                                                             \n[58] \"inflacion_promedio\"                                                    \n[59] \"desempleo\"                                                             \n[60] \"deuda_externa\"                                                         \n[61] \"calificacion_de_deuda\"                                                 \n[62] \"reservas\"                                                              \n[63] \"libertad_economica\"                                                    \n[64] \"indice_riesgos_de_seguridad_energetica\"                                \n[65] \"lineas_moviles\"                                                        \n[66] \"usuarios_de_internet\"                                                  \n[67] \"servidores_de_internet_seguros\"                                        \n[68] \"flujo_de_pasajeros_aereos\"                                             \n[69] \"indice_de_desempeno_logistico_transporte\"                              \n[70] \"trafico_portuario_de_contenedores\"                                     \n[71] \"penetracion_del_sistema_financiero_privado\"                            \n[72] \"capitalizacion_del_mercado_de_valores\"                                 \n[73] \"socios_comerciales_efectivos\"                                          \n[74] \"apertura_comercial\"                                                    \n[75] \"diversificacion_de_las_exportaciones\"                                  \n[76] \"diversificacion_de_las_importaciones\"                                  \n[77] \"libertad_comercial\"                                                    \n[78] \"inversion_extranjera_directa_neta\"                                     \n[79] \"inversion_extranjera_directa_neta_promedio\"                            \n[80] \"ingresos_por_turismo\"                                                  \n[81] \"gasto_en_investigacion_y_desarrollo\"                                   \n[82] \"coeficiente_de_invencion\"                                              \n[83] \"articulos_cientificos_y_tecnicos\"                                      \n[84] \"exportaciones_de_alta_tecnologia\"                                      \n[85] \"indice_de_complejidad_economica\"                                       \n[86] \"empresas_iso_9001\"                                                     \n[87] \"pib_en_servicios\"                                                      \n[88] \"x0\"                                                                    \n[89] \"inversion_fbcf\"                                                        \n[90] \"talento\"                                                               \n\n\nSi quisiéramos que la acción quedará de un solo, podemos usar un pipe diferente:\n\ntlaxt322%<>% \n  clean_names()\n\nnames(tlaxt322)\n\n  [1] \"r_def\"      \"loc\"        \"mun\"        \"est\"        \"est_d_tri\" \n  [6] \"est_d_men\"  \"ageb\"       \"t_loc_tri\"  \"t_loc_men\"  \"cd_a\"      \n [11] \"ent\"        \"con\"        \"upm\"        \"d_sem\"      \"n_pro_viv\" \n [16] \"v_sel\"      \"n_hog\"      \"h_mud\"      \"n_ent\"      \"per\"       \n [21] \"n_ren\"      \"c_res\"      \"par_c\"      \"sex\"        \"eda\"       \n [26] \"nac_dia\"    \"nac_mes\"    \"nac_anio\"   \"l_nac_c\"    \"cs_p12\"    \n [31] \"cs_p13_1\"   \"cs_p13_2\"   \"cs_p14_c\"   \"cs_p15\"     \"cs_p16\"    \n [36] \"cs_p17\"     \"n_hij\"      \"e_con\"      \"cs_p20a_1\"  \"cs_p20a_c\" \n [41] \"cs_p20b_1\"  \"cs_p20b_c\"  \"cs_p20c_1\"  \"cs_ad_mot\"  \"cs_p21_des\"\n [46] \"cs_ad_des\"  \"cs_nr_mot\"  \"cs_p23_des\" \"cs_nr_ori\"  \"ur\"        \n [51] \"zona\"       \"salario\"    \"fac_tri\"    \"fac_men\"    \"clase1\"    \n [56] \"clase2\"     \"clase3\"     \"pos_ocu\"    \"seg_soc\"    \"rama\"      \n [61] \"c_ocu11c\"   \"ing7c\"      \"dur9c\"      \"emple7c\"    \"medica5c\"  \n [66] \"buscar5c\"   \"rama_est1\"  \"rama_est2\"  \"dur_est\"    \"ambito1\"   \n [71] \"ambito2\"    \"tue1\"       \"tue2\"       \"tue3\"       \"busqueda\"  \n [76] \"d_ant_lab\"  \"d_cexp_est\" \"dur_des\"    \"sub_o\"      \"s_clasifi\" \n [81] \"remune2c\"   \"pre_asa\"    \"tip_con\"    \"dispo\"      \"nodispo\"   \n [86] \"c_inac5c\"   \"pnea_est\"   \"niv_ins\"    \"eda5c\"      \"eda7c\"     \n [91] \"eda12c\"     \"eda19c\"     \"hij5c\"      \"domestico\"  \"anios_esc\" \n [96] \"hrsocup\"    \"ingocup\"    \"ing_x_hrs\"  \"tpg_p8a\"    \"tcco\"      \n[101] \"cp_anoc\"    \"imssissste\" \"ma48me1sm\"  \"p14apoyos\"  \"scian\"     \n[106] \"t_tra\"      \"emp_ppal\"   \"tue_ppal\"   \"trans_ppal\" \"mh_fil2\"   \n[111] \"mh_col\"     \"sec_ins\"    \"tipo\"       \"mes_cal\"   \n\n\nMás de otros pipes https://r4ds.had.co.nz/pipes.html"
  },
  {
    "objectID": "P1.html#select-y-filter",
    "href": "P1.html#select-y-filter",
    "title": "1  Introducción: {dplyr}",
    "section": "1.4 select() y filter()",
    "text": "1.4 select() y filter()\nEste es un recordatorio de que en {dplyr}, se filtran CASOS, es decir, líneas o renglones, y se seleccionan VARIABLES.\nPor ejemplo:\n\ntlaxt322%>% \n  dplyr::select(sex, eda) %>% \n  dplyr::filter(eda>11)\n\n# A tibble: 9,205 × 2\n   sex          eda\n   <dbl+lbl>  <dbl>\n 1 1 [Hombre]    34\n 2 2 [Mujer]     57\n 3 1 [Hombre]    71\n 4 1 [Hombre]    67\n 5 2 [Mujer]     60\n 6 2 [Mujer]     35\n 7 1 [Hombre]    39\n 8 1 [Hombre]    38\n 9 2 [Mujer]     33\n10 1 [Hombre]    14\n# … with 9,195 more rows\n\n\nEn la documentación de la base de datos de la ENOE se nos señala que debemos quedarnos con quienes tienen entrevista completa r_def==0 y con quiénes son habitante habituales (c_res!=2\")\nHagamos estos cambios:\n\ntlaxt322%<>%\n  filter(r_def==0) %>% \n  filter(!c_res==2)"
  },
  {
    "objectID": "P1.html#tabulados-con-tabyl",
    "href": "P1.html#tabulados-con-tabyl",
    "title": "1  Introducción: {dplyr}",
    "section": "1.5 Tabulados con tabyl()",
    "text": "1.5 Tabulados con tabyl()\nEl comando tabyl del paquete {janitor} nos sirve para hacer tabulados. Para que sean más bonitas, necesitaremos cambiar algunas de nuestras variables a sus datos etiquetados\n\ntlaxt322%>%\n  dplyr::mutate(sex=sjlabelled::as_label(sex))  %>%\n  janitor::tabyl(sex)\n\n    sex    n   percent\n Hombre 5392 0.4767041\n  Mujer 5919 0.5232959\n\n\nPara ver que esto es una distribución de frecuencias sería muy útil ver la proporción total, ello se realiza agregando un elemento más en nuestro código con una “tubería”:\n\ntlaxt322%>%\n  mutate(sex=as_label(sex)) %>% \n  tabyl(sex) %>%\n  adorn_totals() #primer enchulamiento\n\n    sex     n   percent\n Hombre  5392 0.4767041\n  Mujer  5919 0.5232959\n  Total 11311 1.0000000\n\n\nAhora, las proporciones son raras, y preferimos por los porcentajes.\n\ntlaxt322%>%\n  mutate(sex=as_label(sex)) %>% # cambia los valores de la variable a sus etiquetas\n  tabyl(sex) %>% # para hacer la tabla\n  adorn_totals() %>% # añade totales\n  adorn_pct_formatting()  # nos da porcentaje en lugar de proporción\n\n    sex     n percent\n Hombre  5392   47.7%\n  Mujer  5919   52.3%\n  Total 11311  100.0%\n\n\nVamos a darle una “ojeada” a esta variable\n\nglimpse(tlaxt322$niv_ins)\n\n dbl+lbl [1:11311] 4, 2, 3, 3, 3, 4, 2, 3, 4, 2, 2, 2, 2, 3, 3, 2, 3, 2, 2,...\n @ label       : chr \"Clasificación de la población ocupada por nivel de instrucción\"\n @ format.stata: chr \"%12.0g\"\n @ labels      : Named num [1:6] 0 1 2 3 4 5\n  ..- attr(*, \"names\")= chr [1:6] \"No aplica\" \"Primaria incompleta\" \"Prrimaria completa\" \"Secundaria completa\" ...\n\n\nHoy hacemos la tabla, con las etiquetas:\n\ntlaxt322%>%\n  mutate(niv_ins=as_label(niv_ins)) %>% #esto sólo si hay etiquetas declaradas, recuerda\n  tabyl(niv_ins)\n\n                   niv_ins    n      percent\n                 No aplica  714 0.0631243922\n       Primaria incompleta 2173 0.1921138715\n        Prrimaria completa 2025 0.1790292635\n       Secundaria completa 3201 0.2829988507\n Medio superior y superior 3190 0.2820263460\n           No especificado    8 0.0007072761\n\n\nPara que no nos salgan las categorías sin datos podemos poner una opción dentro del comando “tabyl()”\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% \n  tabyl(niv_ins, \n        show_missing_levels=F ) %>% # esta opción elimina los valores con 0\n  adorn_totals()  \n\n                   niv_ins     n      percent\n                 No aplica   714 0.0631243922\n       Primaria incompleta  2173 0.1921138715\n        Prrimaria completa  2025 0.1790292635\n       Secundaria completa  3201 0.2829988507\n Medio superior y superior  3190 0.2820263460\n           No especificado     8 0.0007072761\n                     Total 11311 1.0000000000\n\n\n\n1.5.1 Cálculo de frecuencias\nLas tablas de doble entrada tiene su nombre porque en las columnas entran los valores de una variable categórica, y en las filas de una segunda. Básicamente es como hacer un conteo de todas las combinaciones posibles entre los valores de una variable con la otra.\nPor ejemplo, si quisiéramos combinar las dos variables que ya estudiamos lo podemos hacer, con una tabla de doble entrada:\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí\n  adorn_totals()  \n\n                   niv_ins Hombre Mujer\n                 No aplica    389   325\n       Primaria incompleta   1066  1107\n        Prrimaria completa    950  1075\n       Secundaria completa   1450  1751\n Medio superior y superior   1533  1657\n           No especificado      4     4\n                     Total   5392  5919\n\n\nObservamos que en cada celda confluyen los casos que comparten las mismas características:\n\ntlaxt322%>%   \n    count(niv_ins==1 & sex==1) # nos da la segunda celda de la izquierda\n\n# A tibble: 2 × 2\n  `niv_ins == 1 & sex == 1`     n\n  <lgl>                     <int>\n1 FALSE                     10245\n2 TRUE                       1066\n\n\n\n\n1.5.2 Totales y porcentajes\nDe esta manera se colocan todos los datos. Si observa al poner la función “adorn_totals()” lo agregó como una nueva fila de totales, pero también podemos pedirle que agregue una columna de totales.\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí sex\n  adorn_totals(\"col\")  \n\n                   niv_ins Hombre Mujer Total\n                 No aplica    389   325   714\n       Primaria incompleta   1066  1107  2173\n        Prrimaria completa    950  1075  2025\n       Secundaria completa   1450  1751  3201\n Medio superior y superior   1533  1657  3190\n           No especificado      4     4     8\n\n\nO bien agregar los dos, introduciendo en el argumento c(\"col\", \"row\") un vector de caracteres de las dos opciones requeridas:\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí sexo\n  adorn_totals(c(\"col\", \"row\")) \n\n                   niv_ins Hombre Mujer Total\n                 No aplica    389   325   714\n       Primaria incompleta   1066  1107  2173\n        Prrimaria completa    950  1075  2025\n       Secundaria completa   1450  1751  3201\n Medio superior y superior   1533  1657  3190\n           No especificado      4     4     8\n                     Total   5392  5919 11311\n\n\nDel mismo modo, podemos calcular los porcentajes. Pero los podemos calcular de tres formas. Uno es que lo calculemos para los totales calculados para las filas, para las columnas o para el gran total poblacional.\nPara columnas tenemos el siguiente código y los siguientes resultados:\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí sexo\n  adorn_totals(c(\"col\", \"row\")) %>% \n  adorn_percentages(\"col\") %>% # Divide los valores entre el total de la columna\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n                   niv_ins Hombre  Mujer  Total\n                 No aplica   7.2%   5.5%   6.3%\n       Primaria incompleta  19.8%  18.7%  19.2%\n        Prrimaria completa  17.6%  18.2%  17.9%\n       Secundaria completa  26.9%  29.6%  28.3%\n Medio superior y superior  28.4%  28.0%  28.2%\n           No especificado   0.1%   0.1%   0.1%\n                     Total 100.0% 100.0% 100.0%\n\n\nCuando se hagan cuadros de distribuciones (que todas sus partes suman 100), los porcentajes pueden ser una gran ayuda para la interpretación, sobre todos cuando se comparar poblaciones de categorías de diferente tamaño. Por lo general, queremos que los cuadros nos den información de donde están los totales y su 100%, de esta manera el lector se puede guiar de porcentaje con respecto a qué está leyendo. En este caso, vemos que el 100% es común en la última fila.\nVeamos la diferencia de cómo podemos leer la misma celda, pero hoy, hemos calculado los porcentajes a nivel de fila:\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% \n  adorn_totals(c(\"col\", \"row\")) %>% \n  adorn_percentages(\"row\") %>% # Divide los valores entre el total de la fila\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n                   niv_ins Hombre Mujer  Total\n                 No aplica  54.5% 45.5% 100.0%\n       Primaria incompleta  49.1% 50.9% 100.0%\n        Prrimaria completa  46.9% 53.1% 100.0%\n       Secundaria completa  45.3% 54.7% 100.0%\n Medio superior y superior  48.1% 51.9% 100.0%\n           No especificado  50.0% 50.0% 100.0%\n                     Total  47.7% 52.3% 100.0%\n\n\nFinalmente, podemos calcular los porcentajes con referencia a la población total en análisis. Es decir la celda en la esquina inferior derecha de nuestra tabla original.\n\ntlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí sexo\n  adorn_totals(c(\"col\", \"row\")) %>% \n   adorn_percentages(\"all\") %>% # Divide los valores entre el total de la población\n  adorn_pct_formatting() # lo vuelve porcentaje\n\n                   niv_ins Hombre Mujer  Total\n                 No aplica   3.4%  2.9%   6.3%\n       Primaria incompleta   9.4%  9.8%  19.2%\n        Prrimaria completa   8.4%  9.5%  17.9%\n       Secundaria completa  12.8% 15.5%  28.3%\n Medio superior y superior  13.6% 14.6%  28.2%\n           No especificado   0.0%  0.0%   0.1%\n                     Total  47.7% 52.3% 100.0%"
  },
  {
    "objectID": "P2.html#paquetes",
    "href": "P2.html#paquetes",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.1 Paquetes",
    "text": "2.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\")#instala pacman si se requiere\n\nLoading required package: pacman\n\npacman::p_load(tidyverse,\n               readxl,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               infer, \n               ggpubr,\n               magrittr,\n               gt,\n               GGally,\n               broom,\n               DescTools,\n               wesanderson)"
  },
  {
    "objectID": "P2.html#cargando-los-datos",
    "href": "P2.html#cargando-los-datos",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.2 Cargando los datos",
    "text": "2.2 Cargando los datos\nDesde STATA\n\ntlaxt322 <- read_dta(\"./datos/tlaxt322.dta\") %>% \n  clean_names()\n\nDesde Excel:\n\nICI_2021 <- read_excel(\"./datos/ICI_2021.xlsx\",\n                               sheet = \"para_importar\") %>% \n  clean_names()\n\nNew names:\n• `` -> `...2`\n\n\n\ntlaxt322 %<>%\n  filter(r_def==0) %>% \n  filter(!c_res==2)"
  },
  {
    "objectID": "P2.html#grammar-of-tables-gt",
    "href": "P2.html#grammar-of-tables-gt",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.3 Grammar of tables: gt",
    "text": "2.3 Grammar of tables: gt\nEs un paquete que nos permite poner nuestras tablas en mejores formatos.\nGuardemos un ejemplo anterior en un objeto\n\nmi_tabla<-tlaxt322%>% \n  mutate(niv_ins=as_label(niv_ins)) %>% # para que las lea como factor\n  mutate(sex=as_label(sex)) %>% # para que las lea como factor\n  tabyl(niv_ins, sex, show_missing_levels=F ) %>% # incluimos aquí sexo\n  adorn_totals(c(\"col\", \"row\")) %>% \n   adorn_percentages(\"all\") %>% # Divide los valores entre el total de la población\n  adorn_pct_formatting() # lo vuelve porcentaje\n\nVeamos qué pasa con el comando “gt”\n\ngt_tabla<-gt(mi_tabla)\ngt_tabla\n\n\n\n\n\n  \n  \n    \n      niv_ins\n      Hombre\n      Mujer\n      Total\n    \n  \n  \n    No aplica\n3.4%\n2.9%\n6.3%\n    Primaria incompleta\n9.4%\n9.8%\n19.2%\n    Prrimaria completa\n8.4%\n9.5%\n17.9%\n    Secundaria completa\n12.8%\n15.5%\n28.3%\n    Medio superior y superior\n13.6%\n14.6%\n28.2%\n    No especificado\n0.0%\n0.0%\n0.1%\n    Total\n47.7%\n52.3%\n100.0%\n  \n  \n  \n\n\n\n\nCon este formato será bastante sencillo agregar títulos y demás:\n\ngt_tabla<-gt_tabla %>%\n  tab_header(\n    title = \"Distribución del sexo de la población según nivel de escolaridad\",\n    subtitle = \"Tlaxcala, trimestre III de 2022\"\n  )\n\ngt_tabla\n\n\n\n\n\n  \n    \n      Distribución del sexo de la población según nivel de escolaridad\n    \n    \n      Tlaxcala, trimestre III de 2022\n    \n  \n  \n    \n      niv_ins\n      Hombre\n      Mujer\n      Total\n    \n  \n  \n    No aplica\n3.4%\n2.9%\n6.3%\n    Primaria incompleta\n9.4%\n9.8%\n19.2%\n    Prrimaria completa\n8.4%\n9.5%\n17.9%\n    Secundaria completa\n12.8%\n15.5%\n28.3%\n    Medio superior y superior\n13.6%\n14.6%\n28.2%\n    No especificado\n0.0%\n0.0%\n0.1%\n    Total\n47.7%\n52.3%\n100.0%\n  \n  \n  \n\n\n\n\nAgreguemos la fuente a nuestra tabla:\n\ngt_tabla<-gt_tabla %>%\n  tab_source_note(\n    source_note = \"Fuente: Cálculos propios con datos de INEGI\"\n  )\n\ngt_tabla\n\n\n\n\n\n  \n    \n      Distribución del sexo de la población según nivel de escolaridad\n    \n    \n      Tlaxcala, trimestre III de 2022\n    \n  \n  \n    \n      niv_ins\n      Hombre\n      Mujer\n      Total\n    \n  \n  \n    No aplica\n3.4%\n2.9%\n6.3%\n    Primaria incompleta\n9.4%\n9.8%\n19.2%\n    Prrimaria completa\n8.4%\n9.5%\n17.9%\n    Secundaria completa\n12.8%\n15.5%\n28.3%\n    Medio superior y superior\n13.6%\n14.6%\n28.2%\n    No especificado\n0.0%\n0.0%\n0.1%\n    Total\n47.7%\n52.3%\n100.0%\n  \n  \n    \n      Fuente: Cálculos propios con datos de INEGI\n    \n  \n  \n\n\n\n\nCheca más de este paquete por aquí https://gt.rstudio.com/articles/intro-creating-gt-tables.html"
  },
  {
    "objectID": "P2.html#descriptivos-para-variables-cuantitativas",
    "href": "P2.html#descriptivos-para-variables-cuantitativas",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.4 Descriptivos para variables cuantitativas",
    "text": "2.4 Descriptivos para variables cuantitativas\nVamos a empezar a revisar los gráficos para variables cuantitativas.\n\n2.4.1 Medidas numéricas básicas\n5 números\n\nsummary(tlaxt322$ing_x_hrs) ## ingreso por horas \n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00    0.00    0.00   12.10   18.75 1356.59 \n\n\nCon pipes se pueden crear “indicadores” de nuestras variables es un tibble\n\ntlaxt322%>% \n  summarise(nombre_indicador=mean(ing_x_hrs, na.rm=T))\n\n# A tibble: 1 × 1\n  nombre_indicador\n             <dbl>\n1             12.1"
  },
  {
    "objectID": "P2.html#visualización-de-datos-un-pequeño-disclaimer",
    "href": "P2.html#visualización-de-datos-un-pequeño-disclaimer",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.5 Visualización de datos, un pequeño disclaimer",
    "text": "2.5 Visualización de datos, un pequeño disclaimer\nHay cursos específicos de visualización de datos. Es maravilloso pero también requiere que estudiemos bien qué tipo de datos tenemos y cuáles son nuestros objetivos.\nMe gusta mucho este recurso: https://www.data-to-viz.com/\n\n2.5.1 Gráficos de base\n“plot()” Es la función más simple.\n\n  plot(as_label(tlaxt322$niv_ins))\n\n\n\n\nEsto es igual que:\n\nbarplot(table(as_label(tlaxt322$niv_ins)))\n\n\n\n\nHistograma y el boxplot\n\nhist(ICI_2021$esperanza_de_vida)\n\n\n\n\n\nboxplot(ICI_2021$esperanza_de_vida)"
  },
  {
    "objectID": "P2.html#grammar-of-graphics-ggplot",
    "href": "P2.html#grammar-of-graphics-ggplot",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.6 Grammar of graphics: ggplot",
    "text": "2.6 Grammar of graphics: ggplot\nHoy vamos a presentar a un gran paquete ¡Es de los famosos! Y tiene más de diez años.\n\nhttps://qz.com/1007328/all-hail-ggplot2-the-code-powering-all-those-excellent-charts-is-10-years-old/\n\n“gg” proviene de “Grammar of Graphics”, funciona un poco como sintácticamente, de ahí su nombre.\nAlgunos recursos para aprender ggplot\n\nhttps://ggplot2-book.org/ hecha por el mero mero.\nhttp://sape.inf.usi.ch/quick-reference/ggplot2\nhttps://raw.githubusercontent.com/rstudio/cheatsheets/master/data-visualization-2.1.pdf\n\nVamos a revisar una presentación que es muy interesante\n\nhttps://evamaerey.github.io/ggplot2_grammar_guide/ggplot2_grammar_guide.html\nhttps://huygens.science.uva.nl/ggPlotteR/ Hace gráficos de ggplot con la base de datos de Gapminder\n\n\n2.6.1 Un lienzo para dibujar\nPara hacer un gráfico, ggplot2 tiene el comando “ggplot()”. Hacer gráficos con esta función tiene una lógica aditiva. Lo ideal es que iniciemos estableciendo el mapeo estético de nuestro gráfico, con el comando aes()\n\ng1<-tlaxt322 %>%\n  ggplot(aes(as_label(niv_ins)))\n\ng1 ## imprime el lienzo\n\n\n\n\n\n\n2.6.2 Gráficos univariados\n\n2.6.2.1 Para cualitativas\n\ng1 + geom_bar()\n\n\n\n\n\ng1 +  geom_bar(aes(\n  fill = as_label(niv_ins)\n  )) ## colorea la geometría\n\n\n\n## Esto es equivalente\n\ntlaxt322 %>%\n  ggplot(aes(as_label(niv_ins),\n             fill = as_label(niv_ins)\n             )\n         ) + geom_bar()\n\n\n\n\n\n\n2.6.2.2 Para variables cuantitativas\nPodemos hacer histogramas y gráficos de densidad, de manera fácil. La idea es agregar en nuestro “lienzo” una geometría, un valor para dibujar en él. Esto se agrega con un “+” y con la figura que se añadirá a nuestro gráfico.\n\ng2<-tlaxt322 %>%\n  ggplot(aes(eda))\n\ng2 ## imprime el lienzo\n\n\n\n\n\n2.6.2.2.1 Histograma\n\ng2 + geom_histogram() \n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n2.6.2.2.2 Densidad\n\ng2 + geom_density()"
  },
  {
    "objectID": "P2.html#intro-a-dos-variables",
    "href": "P2.html#intro-a-dos-variables",
    "title": "2  Repaso de visualización de datos y {ggplot2}",
    "section": "2.7 Intro a dos variables",
    "text": "2.7 Intro a dos variables\nPara hacer un lienzo con dos variables:\n\ntlaxt322 %>% \n  filter(ing_x_hrs>0) %>%  \n  filter(anios_esc<99) %>%  #\n  ggplot()+\n  aes(x = anios_esc,\n      y = ing_x_hrs)\n\n\n\n\nCon esto podemos agregar la geometría de puntito:\n\ntlaxt322 %>% \n  filter(ing_x_hrs>0) %>%  \n  filter(anios_esc<99) %>%  #\n  ggplot()+\n  aes(x = anios_esc,\n      y = ing_x_hrs) +\n  geom_point()\n\n\n\n\nVamos a terminar con un código que resume mucho de lo que hemos visto hoy:\n\ntlaxt322 %>% \n  filter(clase2==1) %>%  ## nos quedamos sólo con los ocupados\n  select(eda, ing_x_hrs, anios_esc) %>% \n  GGally::ggpairs()"
  },
  {
    "objectID": "P3.html#paquetes",
    "href": "P3.html#paquetes",
    "title": "3  Introducción a la inferencia",
    "section": "3.1 Paquetes",
    "text": "3.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\")#instala pacman si se requiere\n\nLoading required package: pacman\n\npacman::p_load(tidyverse,\n               readxl,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               infer, \n               ggpubr,\n               magrittr,\n               gt,\n               GGally,\n               broom,\n               DescTools,\n               wesanderson,\n               gtsummary,\n               srvyr,\n               car)"
  },
  {
    "objectID": "P3.html#cargando-los-datos",
    "href": "P3.html#cargando-los-datos",
    "title": "3  Introducción a la inferencia",
    "section": "3.2 Cargando los datos",
    "text": "3.2 Cargando los datos\nDesde STATA\n\ntlaxt322 <- read_dta(\"./datos/tlaxt322.dta\") %>% \n  clean_names() %>% \n  filter(r_def==0) %>% \n  filter(!c_res==2)\n\nDesde Excel:\n\nICI_2021 <- read_excel(\"./datos/ICI_2021.xlsx\",\n                               sheet = \"para_importar\") %>% \n  clean_names()\n\nNew names:\n• `` -> `...2`"
  },
  {
    "objectID": "P3.html#hipótesis-e-intervalos-de-confianza",
    "href": "P3.html#hipótesis-e-intervalos-de-confianza",
    "title": "3  Introducción a la inferencia",
    "section": "3.3 Hipótesis e intervalos de confianza",
    "text": "3.3 Hipótesis e intervalos de confianza\n\n3.3.1 t-test\nEste comando nos sirve para calcular diferentes tipos de test, que tienen como base la distribución t\nUnivariado para estimación\n\nt.test(tlaxt322$ing_x_hrs) # pero no tenemos los filtro\n\n\n    One Sample t-test\n\ndata:  tlaxt322$ing_x_hrs\nt = 42.362, df = 11310, p-value < 2.2e-16\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 11.53964 12.65937\nsample estimates:\nmean of x \n 12.09951 \n\n\nUn truco para poder utilizar funciones de base con formato tidy\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n    t.test(ing_x_hrs)\n  )\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = 51.961, df = 3631, p-value < 2.2e-16\nalternative hypothesis: true mean is not equal to 0\n95 percent confidence interval:\n 36.25925 39.10282\nsample estimates:\nmean of x \n 37.68103 \n\n\nVamos a quedarnos a con esta población objetivo:\nUnivariado para hipótesis específica\n\\[ H_o:\\mu=40 \\] \\[ H_{a1}: \\mu < 40 \\] \\[ H_{a2}: \\mu \\neq 40 \\] \\[ H_{a3}: \\mu > 40 \\] Si hacemos explícita la \\(H_0\\)\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n    t.test(ing_x_hrs, mu=40)\n    )\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = -3.1978, df = 3631, p-value = 0.001397\nalternative hypothesis: true mean is not equal to 40\n95 percent confidence interval:\n 36.25925 39.10282\nsample estimates:\nmean of x \n 37.68103 \n\n\nPara hacer explícitas las hipótesis alternativas\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n  t.test(ing_x_hrs, mu=40, alternative = \"two.sided\") #default y de dos colas\n    )\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = -3.1978, df = 3631, p-value = 0.001397\nalternative hypothesis: true mean is not equal to 40\n95 percent confidence interval:\n 36.25925 39.10282\nsample estimates:\nmean of x \n 37.68103 \n\n\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n  t.test(ing_x_hrs, mu=40, alternative = \"greater\") # cola derecha\n    )\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = -3.1978, df = 3631, p-value = 0.9993\nalternative hypothesis: true mean is greater than 40\n95 percent confidence interval:\n 36.48793      Inf\nsample estimates:\nmean of x \n 37.68103 \n\n\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n  t.test(ing_x_hrs, mu=40, alternative = \"less\") # cola izquierda\n    )\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = -3.1978, df = 3631, p-value = 0.0006983\nalternative hypothesis: true mean is less than 40\n95 percent confidence interval:\n     -Inf 38.87414\nsample estimates:\nmean of x \n 37.68103 \n\n\n\n\n3.3.2 Enchulando un poquito\nLos resultados tienen la info, pero la podemos almacenar en un objeto. Con los cálculos de modelos es muy útil guardarlos para compararlos.\n\nt.test0<-tlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  with(\n    t.test(ing_x_hrs, mu=40)\n    )\n\nVeamos si lo imprimimos\n\nt.test0\n\n\n    One Sample t-test\n\ndata:  ing_x_hrs\nt = -3.1978, df = 3631, p-value = 0.001397\nalternative hypothesis: true mean is not equal to 40\n95 percent confidence interval:\n 36.25925 39.10282\nsample estimates:\nmean of x \n 37.68103 \n\n\n\nbroom::tidy(t.test0)\n\n# A tibble: 1 × 8\n  estimate statistic p.value parameter conf.low conf.high method         alter…¹\n     <dbl>     <dbl>   <dbl>     <dbl>    <dbl>     <dbl> <chr>          <chr>  \n1     37.7     -3.20 0.00140      3631     36.3      39.1 One Sample t-… two.si…\n# … with abbreviated variable name ¹​alternative\n\n\nLa función tidy() hace que el resultado se vuelva un tibble, una tabla muy compatible con el tidyverse. Esto puede ser útil cuando queremos ir comparando estimaciones.\nAnteriormente vimos con base cómo hacer inferencia. El paquete {infer} tiene también elementos para inferencia, pero en formato más compatible con tidyverse.\n\ntlaxt322 %>% \n  filter(clase2==1) %>% #Filtro de ocupados\n  filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n  infer::t_test(response = ing_x_hrs, mu = 40)\n\n# A tibble: 1 × 7\n  statistic  t_df p_value alternative estimate lower_ci upper_ci\n      <dbl> <dbl>   <dbl> <chr>          <dbl>    <dbl>    <dbl>\n1     -3.20  3631 0.00140 two.sided       37.7     36.3     39.1\n\n\nComo vemos nos da el mismo resultado anterior, pero nos da directamente el resultado en formato tidy.\nSi solo queremos el estimador de “t”\n\ntlaxt322 %>% \nt_stat(response = ing_x_hrs, mu = 40)\n\nWarning: The t_stat() wrapper has been deprecated in favor of the more general\nobserve(). Please use that function instead.\n\n\n        t \n-97.68389 \n\n\nMás de este paquete https://infer.netlify.app/\n\n\n3.3.3 Prueba para proporción\nVamos a revisar la proporción de hombres y mujeres en términos de participación laboral.\nEl comando de base es menos flexible:\n\nprop<-table(tlaxt322[tlaxt322$clase1>0,]$clase1)\nprop.test(prop)\n\n\n    1-sample proportions test with continuity correction\n\ndata:  prop, null probability 0.5\nX-squared = 259.77, df = 1, p-value < 2.2e-16\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.5739084 0.5941550\nsample estimates:\n        p \n0.5840669 \n\n\nLos filtros se complican un poco…\n\ntlaxt322 %>% \n  filter(eda>14 & eda<99) %>% \n  mutate(clase1=as_label(clase1)) %>% #oo\n  tabyl(clase1)\n\n                             clase1    n   percent\n                          No aplica    0 0.0000000\n    Población económicamente activa 5326 0.6208183\n Población no económicamente activa 3253 0.3791817\n\n\nVamos a aprovechar para re-etiquetar la variable clase1\n\netiqueta_pea<-c(\"PEA\", \"PNEA\") # un vector con las etiquetas\n\n\ntlaxt322 %>% \n  filter(eda>14 & eda<99) %>% \n  sjlabelled::set_labels(clase1, labels=etiqueta_pea) %>% \n  mutate(clase1=as_label(clase1)) %>% \n  tabyl(clase1)\n\n clase1    n   percent\n    PEA 5326 0.6208183\n   PNEA 3253 0.3791817\n\n\nEn formato tidy\n\ntlaxt322 %>% \n  filter(eda>14 & eda<99) %>% \n  with(\n    table(clase1)\n    ) %>% \n  prop.test()\n\n\n    1-sample proportions test with continuity correction\n\ndata:  ., null probability 0.5\nX-squared = 500.43, df = 1, p-value < 2.2e-16\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.6104410 0.6310868\nsample estimates:\n        p \n0.6208183 \n\n\nEn base necesita que se alimente de un objeto tipo table, el cual es menos manejable. Por eso utilizaremos más el paquete {infer}\n\ntlaxt322 %>% \n  filter(eda>14 & eda<99) %>% \n  set_labels(clase1, labels=etiqueta_pea) %>% \n  mutate(clase1=as_label(clase1)) %>%   \n  infer::prop_test(clase1 ~ NULL  ,\n             p=0.7, \n            alternative=\"less\")\n\n# A tibble: 1 × 4\n  statistic chisq_df  p_value alternative\n      <dbl>    <int>    <dbl> <chr>      \n1      256.        1 7.22e-58 less       \n\n# Para que nos dé Z\ntlaxt322 %>% \n  filter(eda>14 & eda<99) %>% \n  set_labels(clase1, labels=etiqueta_pea) %>% \n  mutate(clase1=as_label(clase1)) %>%   \n  infer::prop_test(clase1 ~ NULL  ,\n            p=0.7, \n            alternative=\"less\",\n            success = \"PEA\", # necesitamos establecer el éxito\n            z=TRUE)\n\n# A tibble: 1 × 3\n  statistic  p_value alternative\n      <dbl>    <dbl> <chr>      \n1     -16.0 5.97e-58 less"
  },
  {
    "objectID": "P3.html#estimaciones-bivariadas",
    "href": "P3.html#estimaciones-bivariadas",
    "title": "3  Introducción a la inferencia",
    "section": "3.4 Estimaciones bivariadas",
    "text": "3.4 Estimaciones bivariadas\n\n3.4.1 Diferencias de medias por grupos\n¿Podemos decir, con significancia estadística que los valores medios de una variable son diferentes entre los grupos?\n\ntlaxt322%>% \n    filter(clase2==1) %>% # nos quedamos con los trabajadores\n    filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos\n    group_by(as_label(sex)) %>%\n    summarise(avg_hrs = mean(ing_x_hrs, na.rm=T))\n\n# A tibble: 2 × 2\n  `as_label(sex)` avg_hrs\n  <fct>             <dbl>\n1 Hombre             39.0\n2 Mujer              35.8\n\ntlaxt322%>% \n    filter(clase2==1) %>% # nos quedamos con los trabajadores\n    filter(ing_x_hrs>0) %>% #Filtros de quienes reportaron ingresos \n    with(\n      t.test(ing_x_hrs~sex)\n      )\n\n\n    Welch Two Sample t-test\n\ndata:  ing_x_hrs by sex\nt = 2.2679, df = 3598.8, p-value = 0.0234\nalternative hypothesis: true difference in means between group 1 and group 2 is not equal to 0\n95 percent confidence interval:\n 0.4312905 5.9358857\nsample estimates:\nmean in group 1 mean in group 2 \n       38.98269        35.79911 \n\n\nCon “infer” sería:\n\ntlaxt322%>% \n  mutate(sex=as_label(sex)) %>% \n  infer::t_test(ing_x_hrs ~ sex, order = c(\"Hombre\", \"Mujer\") )\n\n# A tibble: 1 × 7\n  statistic  t_df  p_value alternative estimate lower_ci upper_ci\n      <dbl> <dbl>    <dbl> <chr>          <dbl>    <dbl>    <dbl>\n1      11.3 9280. 2.02e-29 two.sided       6.54     5.41     7.68\n\n\n\n\n3.4.2 Diferencias de proporciones.\nEn la versión tidy de infer será más fácil hacer la versión de dos proporciones.\n\ntlaxt322%>% \n  filter(eda>14 & eda<99) %>% \n  set_labels(clase1, labels=etiqueta_pea) %>% \n  mutate(clase1=as_label(clase1)) %>% \n  mutate(sex=as_label(sex)) %>% \n  infer::prop_test(clase1 ~ sex ,\n                   alternative=\"greater\",\n                   success = \"PEA\", # necesitamos establecer el éxito\n                   order = c(\"Hombre\", \"Mujer\"),\n                   z=TRUE)\n\n# A tibble: 1 × 5\n  statistic   p_value alternative lower_ci upper_ci\n      <dbl>     <dbl> <chr>          <dbl>    <dbl>\n1      29.8 7.30e-195 greater        0.313        1"
  },
  {
    "objectID": "P4.html#paquetes",
    "href": "P4.html#paquetes",
    "title": "4  Introducción a la inferencia (II)",
    "section": "4.1 Paquetes",
    "text": "4.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\")#instala pacman si se requiere\n\nLoading required package: pacman\n\npacman::p_load(tidyverse,\n               readxl,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               infer, \n               ggpubr,\n               magrittr,\n               gt,\n               GGally,\n               broom,\n               DescTools,\n               wesanderson,\n               gtsummary,\n               srvyr,\n               car)"
  },
  {
    "objectID": "P4.html#cargando-los-datos",
    "href": "P4.html#cargando-los-datos",
    "title": "4  Introducción a la inferencia (II)",
    "section": "4.2 Cargando los datos",
    "text": "4.2 Cargando los datos\nDesde STATA\n\ntlaxt322 <- read_dta(\"./datos/tlaxt322.dta\") %>% \n  clean_names() %>% \n  filter(r_def==0) %>% \n  filter(!c_res==2)\n\nDesde Excel:\n\nICI_2021 <- read_excel(\"./datos/ICI_2021.xlsx\",\n                               sheet = \"para_importar\") %>% \n  clean_names()\n\nNew names:\n• `` -> `...2`"
  },
  {
    "objectID": "P4.html#factores-de-expansión-y-diseño-muestral",
    "href": "P4.html#factores-de-expansión-y-diseño-muestral",
    "title": "4  Introducción a la inferencia (II)",
    "section": "4.3 Factores de expansión y diseño muestral",
    "text": "4.3 Factores de expansión y diseño muestral\n\n4.3.1 La función tally\nEl comando tabyl() del paquete {janitor} es muy útil pero no es compatible con los factores del expansión. En realidad, tabyl() nos ahorra un poco el hecho de tener que agrupar nuestra base en categorías y luego hacer un conteo para cada una de ellas. tally() es un comando que nos hace ese conteo y group_by() nos agrupa las observaciones de nuestra base de datos para hacer cualquier operación.\n\ntlaxt322  %>% \n group_by(as_label(sex)) %>% \n  tally(fac_tri) %>% #nombre del factor\n  adorn_totals()  # Agrega total\n\n as_label(sex)       n\n        Hombre  650712\n         Mujer  720359\n         Total 1371071\n\n\nPodemos usar funciones de adorn_... de {janitor}\n\ntlaxt322  %>% \n group_by(as_label(sex)) %>% \n  tally(fac_tri) %>% #nombre del factor\n  adorn_totals() %>% # Agrega total\n  adorn_percentages(\"all\")  %>% \n  adorn_pct_formatting()\n\n as_label(sex)      n\n        Hombre  47.5%\n         Mujer  52.5%\n         Total 100.0%\n\n\n\n\n4.3.2 Otras formas\nLa función count() también permite dar pesos\n\ntlaxt322  %>% \n  dplyr::count(sex, niv_ins,  wt = fac_tri) \n\n# A tibble: 12 × 3\n   sex        niv_ins                            n\n   <dbl+lbl>  <dbl+lbl>                      <dbl>\n 1 1 [Hombre] 0 [No aplica]                  47513\n 2 1 [Hombre] 1 [Primaria incompleta]       130266\n 3 1 [Hombre] 2 [Prrimaria completa]        116761\n 4 1 [Hombre] 3 [Secundaria completa]       178274\n 5 1 [Hombre] 4 [Medio superior y superior] 177459\n 6 1 [Hombre] 5 [No especificado]              439\n 7 2 [Mujer]  0 [No aplica]                  40662\n 8 2 [Mujer]  1 [Primaria incompleta]       137557\n 9 2 [Mujer]  2 [Prrimaria completa]        132531\n10 2 [Mujer]  3 [Secundaria completa]       213295\n11 2 [Mujer]  4 [Medio superior y superior] 195934\n12 2 [Mujer]  5 [No especificado]              380\n\n\nEs compatible con etiquetas\n\ntlaxt322  %>% \n  count(as_label(sex), as_label(niv_ins),  wt = fac_tri) \n\n# A tibble: 12 × 3\n   `as_label(sex)` `as_label(niv_ins)`            n\n   <fct>           <fct>                      <dbl>\n 1 Hombre          No aplica                  47513\n 2 Hombre          Primaria incompleta       130266\n 3 Hombre          Prrimaria completa        116761\n 4 Hombre          Secundaria completa       178274\n 5 Hombre          Medio superior y superior 177459\n 6 Hombre          No especificado              439\n 7 Mujer           No aplica                  40662\n 8 Mujer           Primaria incompleta       137557\n 9 Mujer           Prrimaria completa        132531\n10 Mujer           Secundaria completa       213295\n11 Mujer           Medio superior y superior 195934\n12 Mujer           No especificado              380\n\n\nPodemos mover un poquito con pivot_wider para que se vea más a lo que acostumbramos a una tabla de frecuencias\n\ntlaxt322  %>% \n  mutate_at(vars(sex, niv_ins), as_label) %>% \n  count(sex, niv_ins,  wt = fac_tri) %>% \n  tidyr::pivot_wider(names_from = sex, \n              values_from = n)\n\n# A tibble: 6 × 3\n  niv_ins                   Hombre  Mujer\n  <fct>                      <dbl>  <dbl>\n1 No aplica                  47513  40662\n2 Primaria incompleta       130266 137557\n3 Prrimaria completa        116761 132531\n4 Secundaria completa       178274 213295\n5 Medio superior y superior 177459 195934\n6 No especificado              439    380\n\n\n\ntlaxt322  %>% \n  mutate_at(vars(sex, niv_ins), as_label) %>% # otra forma de mutate y as_label\n  count(sex, niv_ins,  wt = fac_tri) %>% \n  pivot_wider(names_from = sex, \n              values_from = n) %>%\n  adorn_totals() %>% # Agrega total\n  adorn_percentages(\"col\")  %>% \n  adorn_pct_formatting()\n\n                   niv_ins Hombre  Mujer\n                 No aplica   7.3%   5.6%\n       Primaria incompleta  20.0%  19.1%\n        Prrimaria completa  17.9%  18.4%\n       Secundaria completa  27.4%  29.6%\n Medio superior y superior  27.3%  27.2%\n           No especificado   0.1%   0.1%\n                     Total 100.0% 100.0%\n\n\n\n\n4.3.3 Diseño complejo\nHay muchos diseños muestrales, asumiremos el diseño simple, pero hay que revisar la documentación de la base\n\n# Muestreo aleatorio\ntlax_srvy <- tlaxt322  %>%\n  as_survey_design(weights = fac_tri)\n\nSi revisamos las encuestas tiene un diseño complejo, hay estratos y unidades primarias de muestreo\n\n# Muestreo estratificado\ntlax_srvy <- tlaxt322  %>%\n  as_survey_design(\n    upm,\n    strata = est_d_tri,\n    weights = fac_tri,\n    nest = TRUE)\n\nComo vemos esto es un archivo bien grande, por lo que mejor vamos a seleccionar un par de variables:\n\n# simple random sample\ntlax_srvy <- tlaxt322  %>%\n  select(upm,est_d_tri, fac_tri, starts_with(\"clase\"),\n         sex, eda, anios_esc, ing_x_hrs, fac_tri) %>% \n  as_survey_design(\n    upm,\n    strata = est_d_tri,\n    weights = fac_tri,\n    nest = TRUE)\n\nPara una media ponderada\n\ntlax_srvy %>%\n  filter(eda>14 & eda<99) %>% #filtro de edad para tabulados\n  filter(clase2==1) %>% # sólo ocupados\n  filter(ing_x_hrs>0) %>% # sólo con ingresos\n  summarise(\n    media_ponderada = survey_mean(ing_x_hrs, na.rm=T))\n\n# A tibble: 1 × 2\n  media_ponderada media_ponderada_se\n            <dbl>              <dbl>\n1            37.1              0.818\n\n\nEste valor coincide con los datos publicados por INEGI, incluso el error estándar. Si queremos los intervalos de confianza:\n\ntlax_srvy %>%\n  filter(eda>14 & eda<99) %>% #filtro de edad para tabulados\n  filter(clase2==1) %>% # sólo ocupados\n  filter(ing_x_hrs>0) %>% # sólo con ingresos\n  summarize(\n    media_ponderada = survey_mean(ing_x_hrs,\n                                  vartype = \"ci\") )\n\n# A tibble: 1 × 3\n  media_ponderada media_ponderada_low media_ponderada_upp\n            <dbl>               <dbl>               <dbl>\n1            37.1                35.5                38.7\n\n\n\ntlax_srvy %>%\n  filter(eda>14 & eda<99) %>% #filtro de edad para tabulados\n  filter(clase2==1) %>% # sólo ocupados\n  filter(ing_x_hrs>0) %>% # sólo con ingresos\n  summarize(\n    mediana_ponderada = survey_median(ing_x_hrs,\n                                  vartype = \"ci\") )\n\n# A tibble: 1 × 3\n  mediana_ponderada mediana_ponderada_low mediana_ponderada_upp\n              <dbl>                 <dbl>                 <dbl>\n1              27.1                  26.7                    28\n\n\n\ntlax_srvy %>%\n  mutate(sex=as_label(sex)) %>% \n  group_by(sex) %>% #variables cuali\n  summarize(proportion = survey_mean(), # proporción\n            total = survey_total() ) # totales\n\n# A tibble: 2 × 5\n  sex    proportion proportion_se  total total_se\n  <fct>       <dbl>         <dbl>  <dbl>    <dbl>\n1 Hombre      0.475       0.00397 650712   12123.\n2 Mujer       0.525       0.00397 720359   12890."
  },
  {
    "objectID": "P4.html#estimación-de-varianzas-y-sus-pruebas-de-hipótesis",
    "href": "P4.html#estimación-de-varianzas-y-sus-pruebas-de-hipótesis",
    "title": "4  Introducción a la inferencia (II)",
    "section": "4.4 Estimación de varianzas y sus pruebas de hipótesis",
    "text": "4.4 Estimación de varianzas y sus pruebas de hipótesis\nPara poder hacer inferencia sobre la varianza utilizamos el comando varTest() del paquete {DescTools}\n\ntlaxt322%>% \n    filter(ing_x_hrs>0) %>% \n      with(\n        DescTools::VarTest(ing_x_hrs)\n        )\n\n\n    One Sample Chi-Square test on variance\n\ndata:  ing_x_hrs\nX-squared = 6935154, df = 3631, p-value < 2.2e-16\nalternative hypothesis: true variance is not equal to 1\n95 percent confidence interval:\n 1825.084 2000.980\nsample estimates:\nvariance of x \n     1909.984 \n\n\nPodemos también decir algo sobre el valor objetivo de nuestra hipótesis\n\ntlaxt322%>% \n    filter(ing_x_hrs>0) %>% \n      with(\n        VarTest(ing_x_hrs, sigma.squared = 100)\n        )\n\n\n    One Sample Chi-Square test on variance\n\ndata:  ing_x_hrs\nX-squared = 69352, df = 3631, p-value < 2.2e-16\nalternative hypothesis: true variance is not equal to 100\n95 percent confidence interval:\n 1825.084 2000.980\nsample estimates:\nvariance of x \n     1909.984 \n\n\n\\[ H_o:\\sigma=100 \\]"
  },
  {
    "objectID": "P4.html#análisis-de-varianza",
    "href": "P4.html#análisis-de-varianza",
    "title": "4  Introducción a la inferencia (II)",
    "section": "4.5 Análisis de varianza",
    "text": "4.5 Análisis de varianza\nAnálisis de varianza. Haremos la versión más simple. Para ver el efecto de un factor sobre una variable cualitativa (oneway). Revisaremos si la región de residencia de los trabajadores tiene un efecto en la distribución de los ingresos por trabajo.\n\n4.5.1 Primero un gráfico\nla ANOVA se basa en que nuestra variable es normal. Quitaremos los outliers\n\nlienzo_bi <-tlaxt322  %>% \n           filter(clase2==1  & !ing_x_hrs==0) %>% \n           ggplot(aes(x=log(ing_x_hrs), fill=as_factor(t_loc_tri), \n           color=as_factor(t_loc_tri),\n           alpha=I(0.5)))\n\nlienzo_bi + geom_density()\n\n\n\n\nLa prueba ANOVA o análisis de varianza, nos dice cuánto de nuestra variable se ve explicado por un factor.\n\\[H_o:\\mu_1=\\mu_2=\\mu_3=\\mu_4\\]\n\\[H_a:\\text{Alguna de las medias es diferente}\\]\nEn los modelos es mul útil guardar nuestros resultados como un objeto\n\nanova<-tlaxt322  %>% \n    filter(ing_x_hrs>0) %>% \n      with(\n        aov(log(ing_x_hrs) ~ as_factor(t_loc_tri))\n           )\n\nsummary(anova)\n\n                       Df Sum Sq Mean Sq F value   Pr(>F)    \nas_factor(t_loc_tri)    2    7.9   3.963   8.559 0.000196 ***\nResiduals            3629 1680.1   0.463                     \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\nCon tidy:\n\ntidy(anova)\n\n# A tibble: 2 × 6\n  term                    df   sumsq meansq statistic   p.value\n  <chr>                <dbl>   <dbl>  <dbl>     <dbl>     <dbl>\n1 as_factor(t_loc_tri)     2    7.93  3.96       8.56  0.000196\n2 Residuals             3629 1680.    0.463     NA    NA       \n\n\n\n\n4.5.2 Comparación entre grupos\n¿si es significativo cuáles diferencias entre los grupos lo son?\n\nTukeyHSD(anova)\n\n  Tukey multiple comparisons of means\n    95% family-wise confidence level\n\nFit: aov(formula = log(ing_x_hrs) ~ as_factor(t_loc_tri))\n\n$`as_factor(t_loc_tri)`\n           diff         lwr           upr     p adj\n3-2 -0.10293620 -0.16198416 -0.0438882377 0.0001319\n4-2 -0.07426595 -0.14892702  0.0003951272 0.0515889\n4-3  0.02867025 -0.04398701  0.1013275135 0.6243629\n\n\n\n\n4.5.3 Supuestos de ANOVA\n\nLas observaciones se obtienen de forma independiente y aleatoria de la población definida por los niveles del factor\nLos datos de cada nivel de factor se distribuyen normalmente.\nEstas poblaciones normales tienen una varianza común.\n\n\n#Prueba Bartlett para ver si las varianzas son iguales\n\ntlaxt322  %>% \n    filter(clase2==1) %>% \n      with(bartlett.test(ing_x_hrs ~ as_factor(t_loc_tri)))\n\n\n    Bartlett test of homogeneity of variances\n\ndata:  ing_x_hrs by as_factor(t_loc_tri)\nBartlett's K-squared = 132, df = 2, p-value < 2.2e-16\n\n\nLa prueba tiene una Ho “Las varianzas son iguales”\n\n#Test Normalidad \ntlaxt322  %>% \n  filter(clase2==1) %>% \n  filter(ing_x_hrs>0) %>% \n with(\n    ks.test(log(ing_x_hrs),\n            \"pnorm\",\n            mean=mean(log(ing_x_hrs)),\n            sd=sd(log(ing_x_hrs)))\n    )\n\nWarning in ks.test.default(log(ing_x_hrs), \"pnorm\", mean =\nmean(log(ing_x_hrs)), : ties should not be present for the Kolmogorov-Smirnov\ntest\n\n\n\n    Asymptotic one-sample Kolmogorov-Smirnov test\n\ndata:  log(ing_x_hrs)\nD = 0.081512, p-value < 2.2e-16\nalternative hypothesis: two-sided\n\n\nLa prueba tiene una Ho “La variable es normal”\n¿Qué hacer?\n\n\n4.5.4 Kruskal-Wallis test\nHay una prueba muy parecida que se basa en el orden de las observaciones, y se lee muy parecida a la ANOVA\n\nkruskal<-tlaxt322  %>% \n    filter(ing_x_hrs>0) %>% \n      with(\n        kruskal.test(ing_x_hrs ~ as_factor(t_loc_tri))\n        )\n\nkruskal\n\n\n    Kruskal-Wallis rank sum test\n\ndata:  ing_x_hrs by as_factor(t_loc_tri)\nKruskal-Wallis chi-squared = 20.933, df = 2, p-value = 2.847e-05\n\n\nPara ver las comparaciones tenemos que usar el DunnTest(), del paquete {DescTools}\n\ntlaxt322  %>% \n    filter(ing_x_hrs>0) %>% \n      with(\n        DescTools::DunnTest(ing_x_hrs ~ as_factor(t_loc_tri))\n        )\n\n\n Dunn's test of multiple comparisons using rank sums : holm  \n\n    mean.rank.diff   pval    \n3-2      -171.3068  3e-05 ***\n4-2      -146.1191 0.0058 ** \n4-3        25.1877 0.5978    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n4.5.4.1 Un gráfico coqueto:\nSe hace con ggpubr\n\ntlaxt322  %>% \n  filter(clase2==1) %>% \n  ggpubr::ggviolin(x = \"t_loc_tri\", y = \"ing_x_hrs\", fill = \"t_loc_tri\",\n                   add = \"boxplot\", add.params = list(fill = \"white\")) +\n  stat_compare_means(label.y = 600)  # Add the p-value \n\n\n\ncomparaciones <- list( c(\"1\", \"2\"), c(\"2\", \"3\"), c(\"1\", \"3\"),\n                       c(\"1\", \"4\"), c(\"2\", \"4\"), c(\"3\", \"4\") )\n\n\n\n#Un gráfiquito accesorio 2:\n\ntlaxt322  %>% \n  filter(clase2==1) %>% \n  filter(ing_x_hrs>0) %>% \n  ggpubr::ggviolin(x = \"t_loc_tri\", y = \"ing_x_hrs\", fill = \"t_loc_tri\",\n                   palette = wesanderson::wes_palette(\"GrandBudapest1\", 4, type=\"discrete\"),\n                   add = \"boxplot\", add.params = list(fill = \"white\"))+\n  stat_compare_means(comparisons = comparaciones, label = \"p.signif\")+ # Add significance levels\n  stat_compare_means(label.y = 500)     # Add global the p-value \n\n[1] FALSE\n\n\nWarning: Computation failed in `stat_signif()`\nCaused by error in `if (scales$x$map(comp[1]) == data$group[1] | manual) ...`:\n! valor ausente donde TRUE/FALSE es necesario"
  },
  {
    "objectID": "P5.html#paquetes",
    "href": "P5.html#paquetes",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.1 Paquetes",
    "text": "5.1 Paquetes\n\nif (!require(\"pacman\")) install.packages(\"pacman\")#instala pacman si se requiere\n\nLoading required package: pacman\n\npacman::p_load(tidyverse,\n               readxl,\n               writexl, \n               haven,\n               sjlabelled, \n               janitor,\n               infer, \n               ggpubr,\n               magrittr,\n               gt,\n               GGally,\n               broom,\n               DescTools,\n               wesanderson,\n               gtsummary,\n               srvyr,\n               car,\n               sjPlot,\n               performance, see,\n               jtools, #ojo\n               sandwich, \n               huxtable)"
  },
  {
    "objectID": "P5.html#cargando-los-datos",
    "href": "P5.html#cargando-los-datos",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.2 Cargando los datos",
    "text": "5.2 Cargando los datos\nDesde STATA y haciendo filtros para hacer el código más corto:\n\ntlaxt322 <- read_dta(\"./datos/tlaxt322.dta\") %>% \n  clean_names() %>% \n  filter(r_def==0) %>% \n  filter(!c_res==2) %>% \n  filter(ing_x_hrs>0) %>% \n  filter(clase2==1) %>% \n  filter(anios_esc<99) %>% \n  mutate(log_ing_x_hrs=log(ing_x_hrs))"
  },
  {
    "objectID": "P5.html#introducción-a-la-regresión-lineal",
    "href": "P5.html#introducción-a-la-regresión-lineal",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.3 Introducción a la regresión lineal",
    "text": "5.3 Introducción a la regresión lineal\nLa relación entre dos variables\nEn términos mincerianos, los ingresos estarían explicados por la escolaridad y la experiencia…\n\ntlaxt322 %>% \n  ggplot() +\n  aes(x=anios_esc, \n      y=log_ing_x_hrs) + \n  geom_point()\n\n\n\n\nCuando tenemos muchos casos es útil la opción “jitter”\n\ntlaxt322 %>% \n  ggplot() +\n  aes(x=anios_esc, y=log_ing_x_hrs) + \n  geom_jitter()\n\n\n\n\nTambién cambiar un poquito la transparencia…\n\ntlaxt322 %>% \n  ggplot() +\n    aes(x=anios_esc, y=log_ing_x_hrs, alpha=I(0.5)) + \n  geom_jitter()\n\n\n\n\n¿Cómo se ve la línea MCO ajustada por estos elementos?\n\ntlaxt322 %>% \n  ggplot() +\n    aes(x=anios_esc, y=log_ing_x_hrs, alpha=I(0.5)) + \n  geom_jitter()+\n  geom_smooth(method = lm)\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "P5.html#prueba-de-hipótesis-para-la-correlación",
    "href": "P5.html#prueba-de-hipótesis-para-la-correlación",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.4 Prueba de hipótesis para la correlación",
    "text": "5.4 Prueba de hipótesis para la correlación\nUna prueba de hipotésis sobe la correlación\n\ncor_test<-tlaxt322 %>% \n  with(\n    cor.test(log_ing_x_hrs, \n             anios_esc, \n             use = \"pairwise\")) # prueba de hipótesis.\n\n#dos modos de visualizar el resultado\n\ncor_test \n\n\n    Pearson's product-moment correlation\n\ndata:  log_ing_x_hrs and anios_esc\nt = 21.85, df = 3626, p-value < 2.2e-16\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.3120129 0.3695315\nsample estimates:\n      cor \n0.3410914 \n\ntidy(cor_test)\n\n\n\n\nestimatestatisticp.valueparameterconf.lowconf.highmethodalternative\n\n0.34121.81.59e-9936260.3120.37Pearson's product-moment correlationtwo.sided"
  },
  {
    "objectID": "P5.html#cómo-se-ajusta-la-línea",
    "href": "P5.html#cómo-se-ajusta-la-línea",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.5 ¿cómo se ajusta la línea?",
    "text": "5.5 ¿cómo se ajusta la línea?\nEste sería el modelo simple\n\\[y=\\beta_o+\\beta_1x +\\epsilon\\]\nDonde los parámetros \\(\\beta_o\\) y \\(\\beta_1\\) describen la pendiente y el intercepto de la población, respectivamente.\n\nmodelo<-tlaxt322 %>% \n  with(\n    lm(log_ing_x_hrs~ anios_esc)\n  )\n\nmodelo\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc)\n\nCoefficients:\n(Intercept)    anios_esc  \n    2.74119      0.06062  \n\n\nGuardarlo en un objeto sirve de mucho porque le podemos “preguntar” cosas\n\nsummary(modelo) # da todo menos la anova de la regresión\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-2.9546 -0.3556 -0.0423  0.3432  3.4410 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 2.741194   0.030334   90.37   <2e-16 ***\nanios_esc   0.060619   0.002774   21.85   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6413 on 3626 degrees of freedom\nMultiple R-squared:  0.1163,    Adjusted R-squared:  0.1161 \nF-statistic: 477.4 on 1 and 3626 DF,  p-value: < 2.2e-16\n\nconfint(modelo) # da los intervalos de confianza\n\n                 2.5 %     97.5 %\n(Intercept) 2.68172099 2.80066669\nanios_esc   0.05517928 0.06605823\n\nanova(modelo) # esto sí da la anova de la regresión.\n\n\n\n\nDfSum SqMean SqF valuePr(>F)\n\n1196       196    4771.59e-99\n\n36261.49e+030.411       \n\n\n\n\nPara ver esto más guapo:\n\nmodelo %>%\n   gtsummary::tbl_regression() \n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Beta\n      95% CI1\n      p-value\n    \n  \n  \n    Años de escolaridad\n0.06\n0.06, 0.07\n<0.001\n  \n  \n  \n    \n      1 CI = Confidence Interval\n    \n  \n\n\n\n  #%>% \n  # add_significance_stars() %>% \n  # add_n() %>% \n  # add_glance_table()"
  },
  {
    "objectID": "P5.html#diagnósticos",
    "href": "P5.html#diagnósticos",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.6 Diagnósticos",
    "text": "5.6 Diagnósticos\n\nplot(modelo)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n5.6.1 Outliers y Normalidad\n\n# Assessing Outliers\ncar::outlierTest(modelo) # Bonferonni p-value for most extreme obs\n\n      rstudent unadjusted p-value Bonferroni p\n585   5.389216         7.5277e-08   0.00027311\n821  -4.622756         3.9187e-06   0.01421700\n3594  4.514303         6.5544e-06   0.02377900\n3108  4.419125         1.0200e-05   0.03700600\n3264  4.387877         1.1772e-05   0.04270900\n\n\n\nggpubr::ggqqplot(tlaxt322$log_ing_x_hrs)\n\nWarning: The following aesthetics were dropped during statistical transformation: sample\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\nThe following aesthetics were dropped during statistical transformation: sample\nℹ This can happen when ggplot fails to infer the correct grouping structure in\n  the data.\nℹ Did you forget to specify a `group` aesthetic or to convert a numerical\n  variable into a factor?\n\n\n\n\n\n\n\n5.6.2 Homocedasticidad\n\n# non-constant error variance test\ncar::ncvTest(modelo)\n\nNon-constant Variance Score Test \nVariance formula: ~ fitted.values \nChisquare = 13.53891, Df = 1, p = 0.00023367\n\n# plot studentized residuals vs. fitted values \ncar::spreadLevelPlot(modelo)\n\n\n\n\n\nSuggested power transformation:  0.0476972 \n\n\n\n\n5.6.3 Con el paquete {performance}\nHay varios chequeos múltiples útiles en este paquete:\n\nperformance::check_model(modelo)\n\n\n\n\nY hacer un test de heterocedasticidad\n\nperformance::check_heteroscedasticity(modelo)\n\nWarning: Heteroscedasticity (non-constant error variance) detected (p < .001)."
  },
  {
    "objectID": "P5.html#regresión-lineal-múltiple",
    "href": "P5.html#regresión-lineal-múltiple",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.7 Regresión Lineal múltiple",
    "text": "5.7 Regresión Lineal múltiple\n\n5.7.1 Agregando una variable categórica\n¿Es igual la relación entre hombres y mujeres con los ingresos y la escolaridad?\n\ntlaxt322 %>% \n  ggplot() +\n    aes(x=anios_esc, y=log_ing_x_hrs, alpha=I(0.5), color=as_label(sex)) + \n  geom_jitter()+\n  geom_smooth(method = lm)\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\nCuando nosotros tenemos una variable categórica para la condición de sexo. [nota: seguimos haciendo el ejercicio, a pesar de que ya observamos en nuestro diagnóstico el modelo no cumple con los supuestos, pero lo haremos para fines ilustrativos]\n\nmodelo1<-tlaxt322 %>% \n  mutate(sex = as_label(sex)) %>% \n  with(\n    lm(log_ing_x_hrs ~ anios_esc + sex)\n  )\n\nsummary(modelo1)\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc + sex)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-2.9999 -0.3586 -0.0338  0.3492  3.3780 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  2.782795   0.030924   89.99  < 2e-16 ***\nanios_esc    0.061881   0.002768   22.36  < 2e-16 ***\nsexMujer    -0.133297   0.021606   -6.17  7.6e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6381 on 3625 degrees of freedom\nMultiple R-squared:  0.1255,    Adjusted R-squared:  0.125 \nF-statistic: 260.2 on 2 and 3625 DF,  p-value: < 2.2e-16\n\n\nEste modelo tiene coeficientes que deben leerse “condicionados”. Es decir, en este caso tenemos que el coeficiente asociado a la edad, mantiene constante el valor de sexo y viceversa.\n¿Cómo saber is ha mejorado nuestro modelo? Podemos comparar el ajuste con la anova, es decir, una prueba F\n\npruebaf0<-anova(modelo, modelo1)\npruebaf0\n\n\n\n\nRes.DfRSSDfSum of SqFPr(>F)\n\n3.63e+031.49e+03          \n\n3.62e+031.48e+03115.538.17.6e-10\n\n\n\n\nComo puedes ver, el resultado muestra un Df de 1 (lo que indica que el modelo más complejo tiene un parámetro adicional) y un valor p muy pequeño (<.51). Esto significa que agregar el sexo al modelo lleva a un ajuste significativamente mejor sobre el modelo original.\nEsto también lo podemos hacer con el paquete {performance}:\n\nperformance::compare_performance(modelo, modelo1)\n\n\n\n\nNameModelAICAIC_wtAICcAICc_wtBICBIC_wtR2R2_adjustedRMSESigma\n\nmodelolm7.08e+031.6e-087.08e+031.61e-087.1e+03 3.55e-070.1160.1160.6410.641\n\nmodelo1lm7.04e+031      7.04e+031       7.07e+031       0.1260.1250.6380.638\n\n\n\n\nY también podemos hacer una prueba:\n\nperformance::test_performance(modelo, modelo1)\n\n\n\n\nNameModellog_BFBFdfdf_diffChi2p\n\nmodelolm         3         \n\nmodelo1lm14.92.81e+064137.97.46e-10\n\n\n\n\n\n\n5.7.2 Otra variable cuantitativa\nPodemos seguir añadiendo variables sólo “sumando” en la función\n\nmodelo2<- tlaxt322 %>% \n  mutate(sex=as_label(sex)) %>%\n  with(\n    lm(log_ing_x_hrs ~ anios_esc + sex + eda)\n    )\nsummary(modelo2)\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc + sex + eda)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.0735 -0.3431 -0.0291  0.3461  3.3376 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  2.5277184  0.0484577  52.163  < 2e-16 ***\nanios_esc    0.0669698  0.0028505  23.494  < 2e-16 ***\nsexMujer    -0.1367690  0.0214777  -6.368 2.16e-10 ***\neda          0.0052229  0.0007671   6.808 1.15e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6341 on 3624 degrees of freedom\nMultiple R-squared:  0.1366,    Adjusted R-squared:  0.1359 \nF-statistic: 191.1 on 3 and 3624 DF,  p-value: < 2.2e-16\n\n\nY podemos ver si introducir esta variable afectó al ajuste global del modelo\n\npruebaf1<-anova(modelo1, modelo2)\npruebaf1\n\n\n\n\nRes.DfRSSDfSum of SqFPr(>F)\n\n3.62e+031.48e+03           \n\n3.62e+031.46e+03118.646.41.15e-11\n\n\n\n\nHoy que tenemos más variables podemos hablar de revisar dos supuestos más.\n\n\n5.7.3 Otros supuestos\nAdemás de los supuestos de la regresión simple, podemos revisar estos otros. De nuevo, usaremos el paquete {car}\n\nLinealidad en los parámetros (será más díficil entre más variables tengamos)\nLa normalidad también, porque debe ser multivariada\nMulticolinealidad La prueba más común es la de Factor Influyente de la Varianza (VIF) por sus siglas en inglés. La lógica es que la multicolinealidad tendrá efectos en nuestro R2, inflándolo. De ahí que observamos de qué variable(s) proviene este problema relacionado con la multicolinealidad.\n\nSi el valor es mayor a 5, tenemos un problema muy grave.\n\ncar::vif(modelo2)\n\nanios_esc       sex       eda \n 1.079735  1.006061  1.073849 \n\n\n\n\n5.7.4 Paquete {jtools}\nUn solo modelo:\n\njtools::summ(modelo)\n\n\n\n\n  \n    Observations \n    3628 \n  \n  \n    Dependent variable \n    log_ing_x_hrs \n  \n  \n    Type \n    OLS linear regression \n  \n\n \n\n  \n    F(1,3626) \n    477.40 \n  \n  \n    R² \n    0.12 \n  \n  \n    Adj. R² \n    0.12 \n  \n\n \n \n  \n      \n    Est. \n    S.E. \n    t val. \n    p \n  \n \n\n  \n    (Intercept) \n    2.74 \n    0.03 \n    90.37 \n    0.00 \n  \n  \n    anios_esc \n    0.06 \n    0.00 \n    21.85 \n    0.00 \n  \n\n\n Standard errors: OLS\n\n\n\nSi queremos errores robusto, estilo STATA:\n\nsumm(modelo2,  robust = \"HC1\")\n\n\n\n\n  \n    Observations \n    3628 \n  \n  \n    Dependent variable \n    log_ing_x_hrs \n  \n  \n    Type \n    OLS linear regression \n  \n\n \n\n  \n    F(3,3624) \n    191.07 \n  \n  \n    R² \n    0.14 \n  \n  \n    Adj. R² \n    0.14 \n  \n\n \n \n  \n      \n    Est. \n    S.E. \n    t val. \n    p \n  \n \n\n  \n    (Intercept) \n    2.53 \n    0.05 \n    50.79 \n    0.00 \n  \n  \n    anios_esc \n    0.07 \n    0.00 \n    20.56 \n    0.00 \n  \n  \n    sexMujer \n    -0.14 \n    0.02 \n    -6.32 \n    0.00 \n  \n  \n    eda \n    0.01 \n    0.00 \n    6.39 \n    0.00 \n  \n\n\n Standard errors: Robust, type = HC1\n\n\n\nSi queremos estandarizar nuestras escalas:\n\nsumm(modelo2,  scale=T)\n\n\n\n\n  \n    Observations \n    3628 \n  \n  \n    Dependent variable \n    log_ing_x_hrs \n  \n  \n    Type \n    OLS linear regression \n  \n\n \n\n  \n    F(3,3624) \n    191.07 \n  \n  \n    R² \n    0.14 \n  \n  \n    Adj. R² \n    0.14 \n  \n\n \n \n  \n      \n    Est. \n    S.E. \n    t val. \n    p \n  \n \n\n  \n    (Intercept) \n    3.42 \n    0.01 \n    249.25 \n    0.00 \n  \n  \n    anios_esc \n    0.26 \n    0.01 \n    23.49 \n    0.00 \n  \n  \n    sexMujer \n    -0.14 \n    0.02 \n    -6.37 \n    0.00 \n  \n  \n    eda \n    0.07 \n    0.01 \n    6.81 \n    0.00 \n  \n\n\n Standard errors: OLS; Continuous predictors are mean-centered and scaled by 1 s.d.\n\n\n\nTambién se pueden comparar modelos:\n\nexport_summs(modelo, modelo1, modelo2)\n\n\n\n\nModel 1Model 2Model 3\n\n(Intercept)2.74 ***2.78 ***2.53 ***\n\n(0.03)   (0.03)   (0.05)   \n\nanios_esc0.06 ***0.06 ***0.07 ***\n\n(0.00)   (0.00)   (0.00)   \n\nsexMujer       -0.13 ***-0.14 ***\n\n       (0.02)   (0.02)   \n\neda              0.01 ***\n\n              (0.00)   \n\nN3628       3628       3628       \n\nR20.12    0.13    0.14    \n\n *** p < 0.001;  ** p < 0.01;  * p < 0.05.\n\n\n\n\nTambién el paquete “sjPlot” tiene el comando “plot_model()”\n\nsjPlot::plot_model(modelo1)\n\n\n\nsjPlot::plot_models(modelo, modelo1, modelo2)"
  },
  {
    "objectID": "P5.html#post-estimación",
    "href": "P5.html#post-estimación",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.8 Post-estimación",
    "text": "5.8 Post-estimación\n\n5.8.1 Las predicciones\nUnos de los usos más comunes de los modelos estadísticos es la predicción\n\nsjPlot::plot_model(modelo2, type=\"pred\", terms = \"anios_esc\")\n\n\n\n\nTambién podemos incluir la predecciones para los distintos valores de las variables\n\nplot_model(modelo2, type=\"pred\", terms = c(\"anios_esc\",\"sex\")) + theme_blank()\n\n\n\n\nEl orden de los términos importa:\n\nplot_model(modelo2, type=\"pred\", terms = c(\"sex\",\"anios_esc\")) + theme_blank()\n\n\n\n\n\n\n5.8.2 Efectos marginales\nCon los efectos marginales, por otro lado medimos el efecto promedio, dejando el resto de variables constantes.\n\nplot_model(modelo2, type=\"eff\", terms = \"anios_esc\")\n\nPackage `effects` is not available, but needed for `ggeffect()`. Either\n  install package `effects`, or use `ggpredict()`. Calling `ggpredict()`\n  now.\n\n\n\n\nplot_model(modelo2, type=\"eff\", terms = \"sex\")\n\nPackage `effects` is not available, but needed for `ggeffect()`. Either\n  install package `effects`, or use `ggpredict()`. Calling `ggpredict()`\n  now.\n\n\n\n\n\n¿Es el mismo gráfico que con “pred”? Veamos la ayuda\n¿Y si queremos ver esta informaicón graficada?\n\neff<-plot_model(modelo2, type=\"eff\", terms = \"anios_esc\")\n\nPackage `effects` is not available, but needed for `ggeffect()`. Either\n  install package `effects`, or use `ggpredict()`. Calling `ggpredict()`\n  now.\n\neff$data\n\n\n\n\nxpredictedstd.errorconf.lowconf.highgroupgroup_col\n\n02.730.03162.672.7911\n\n22.870.02662.812.9211\n\n43   0.02192.963.0411\n\n63.130.01783.1 3.1711\n\n83.270.01483.243.3 11\n\n103.4 0.01373.373.4311\n\n123.540.01483.513.5611\n\n143.670.01783.633.7 11\n\n163.8 0.02193.763.8511\n\n183.940.02663.893.9911\n\n204.070.03164.014.1311\n\n224.210.03684.134.2811\n\n\n\n\n\neff<-plot_model(modelo2, type=\"pred\", terms = \"anios_esc\")\neff$data\n\n\n\n\nxpredictedstd.errorconf.lowconf.highgroupgroup_col\n\n02.730.03162.672.7911\n\n22.870.02662.812.9211\n\n43   0.02192.963.0411\n\n63.130.01783.1 3.1711\n\n83.270.01483.243.3 11\n\n103.4 0.01373.373.4311\n\n123.540.01483.513.5611\n\n143.670.01783.633.7 11\n\n163.8 0.02193.763.8511\n\n183.940.02663.893.9911\n\n204.070.03164.014.1311\n\n224.210.03684.134.2811"
  },
  {
    "objectID": "P5.html#extensiones-del-modelo-de-regresión",
    "href": "P5.html#extensiones-del-modelo-de-regresión",
    "title": "5  Introducción a los modelos de regresión",
    "section": "5.9 Extensiones del modelo de regresión",
    "text": "5.9 Extensiones del modelo de regresión\n\n5.9.1 Introducción a las interacciones\nMuchas veces las variables explicativas van a tener relación entre sí. Por ejemplo ¿Las horas tendrá que ver con el sexo y afectan no sólo en intercepto si no también la pendiente? Para ello podemos introducir una interacción\n\nmodelo_int1<-lm(log_ing_x_hrs ~ anios_esc * sex , data = tlaxt322, na.action=na.exclude)\nsummary(modelo_int1)\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc * sex, data = tlaxt322, \n    na.action = na.exclude)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.0278 -0.3584 -0.0289  0.3452  3.4058 \n\nCoefficients:\n               Estimate Std. Error t value Pr(>|t|)    \n(Intercept)    3.049566   0.091903  33.182  < 2e-16 ***\nanios_esc      0.048830   0.008487   5.754 9.46e-09 ***\nsex           -0.226965   0.061500  -3.691 0.000227 ***\nanios_esc:sex  0.009071   0.005577   1.627 0.103888    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6379 on 3624 degrees of freedom\nMultiple R-squared:  0.1262,    Adjusted R-squared:  0.1254 \nF-statistic: 174.4 on 3 and 3624 DF,  p-value: < 2.2e-16\n\n\nEsta interacción lo que asume es que las pendientes pueden moverse (aunque en este caso específico no lo hacen tanto porque no nos salió significativa)\n\nplot_model(modelo_int1, type=\"int\", terms = c(\"sex\", \"anios_esc\"))\n\n\n\n\n\n\n5.9.2 Efectos no lineales\n\n5.9.2.1 Explicitando el logaritmo\n\nmodelo_log<-tlaxt322 %>% \n  with(\n    lm(log(ing_x_hrs) ~ log(eda) + sex))\n\nsummary(modelo_log)\n\n\nCall:\nlm(formula = log(ing_x_hrs) ~ log(eda) + sex)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.4773 -0.3734 -0.0570  0.3443  3.8024 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  3.18608    0.11087  28.737  < 2e-16 ***\nlog(eda)     0.08762    0.02949   2.971  0.00299 ** \nsex         -0.09897    0.02296  -4.310 1.67e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6798 on 3625 degrees of freedom\nMultiple R-squared:  0.007366,  Adjusted R-squared:  0.006818 \nF-statistic: 13.45 on 2 and 3625 DF,  p-value: 1.516e-06\n\n\n\nplot_model(modelo_log, type=\"pred\", terms =\"eda\")\n\nModel has log-transformed response. Back-transforming predictions to\n  original response scale. Standard errors are still on the log-scale.\n\n\n\n\n\n\n\n5.9.2.2 Efecto cuadrático (ojo con la sintaxis)\n\nmodelo_quadr<-lm(log_ing_x_hrs ~ anios_esc + I(anios_esc^2) + sex, \n                 data=tlaxt322)\nsummary(modelo_quadr)\n\n\nCall:\nlm(formula = log_ing_x_hrs ~ anios_esc + I(anios_esc^2) + sex, \n    data = tlaxt322)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.2111 -0.3427 -0.0236  0.3345  3.2133 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(>|t|)    \n(Intercept)     3.4198227  0.0627084  54.535  < 2e-16 ***\nanios_esc      -0.0485443  0.0107916  -4.498 7.06e-06 ***\nI(anios_esc^2)  0.0053554  0.0005064  10.576  < 2e-16 ***\nsex            -0.1428121  0.0213016  -6.704 2.34e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6285 on 3624 degrees of freedom\nMultiple R-squared:  0.1517,    Adjusted R-squared:  0.151 \nF-statistic:   216 on 3 and 3624 DF,  p-value: < 2.2e-16\n\n\nQuizás con un gráfico de lo predicho tenemos más claro lo que hace ese término\n\nplot_model(modelo_quadr, type=\"pred\", terms = c(\"anios_esc\"))"
  },
  {
    "objectID": "anexo.html#lista-general-de-youtube",
    "href": "anexo.html#lista-general-de-youtube",
    "title": "Material anexo",
    "section": "Lista general de YouTube",
    "text": "Lista general de YouTube\nhttps://www.youtube.com/playlist?list=PLDnSa5YhrAVlczarJEzgR_bxFGbg9MGEU"
  },
  {
    "objectID": "anexo.html#scripts",
    "href": "anexo.html#scripts",
    "title": "Material anexo",
    "section": "Scripts",
    "text": "Scripts\nLos scripts están en esta carpeta: https://github.com/aniuxa/posgrado_modelo3/tree/main/scripts"
  },
  {
    "objectID": "anexo.html#cuestionarios",
    "href": "anexo.html#cuestionarios",
    "title": "Material anexo",
    "section": "Cuestionarios",
    "text": "Cuestionarios\n\nPrimer cuestionario\nDespués de la sesión 1 y 2\nCuestionario\n\n\nSegundo cuestionario\nDespués de la sesión 3 y 4\nCuestionario"
  },
  {
    "objectID": "anexo.html#sesión-1",
    "href": "anexo.html#sesión-1",
    "title": "Material anexo",
    "section": "Sesión 1",
    "text": "Sesión 1\n\nVideo\n\n\n\nCheat Sheets\n\nRStudio IDE: https://raw.githubusercontent.com/rstudio/cheatsheets/main/rstudio-ide.pdf\ndplyr: https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf"
  },
  {
    "objectID": "anexo.html#sesión-2",
    "href": "anexo.html#sesión-2",
    "title": "Material anexo",
    "section": "Sesión 2",
    "text": "Sesión 2\n\nVideo\n\n\n\nCheat Sheets\n\nggplot2: https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf"
  },
  {
    "objectID": "anexo.html#sesión-3",
    "href": "anexo.html#sesión-3",
    "title": "Material anexo",
    "section": "Sesión 3",
    "text": "Sesión 3\n\nVideo"
  },
  {
    "objectID": "anexo.html#sesión-4",
    "href": "anexo.html#sesión-4",
    "title": "Material anexo",
    "section": "Sesión 4",
    "text": "Sesión 4\n\nVideo"
  }
]